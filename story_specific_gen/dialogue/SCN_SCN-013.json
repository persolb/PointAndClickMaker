{
  "dialogueGraphs": [
    {
      "id": "SCN_013_CARD_READER",
      "sceneId": "SCN-013",
      "startNodeId": "N_START",
      "nodes": [
        {
          "id": "N_START",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The card reader indicator is green. The faceplate is still scuffed, like it remembers being hit.",
          "next": "N_INTRO2"
        },
        {
          "id": "N_INTRO2",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "A small display wakes up and immediately asks a question like it\u2019s waiting to be right.",
          "next": "N_READER_BADGE"
        },
        {
          "id": "N_READER_BADGE",
          "type": "npc_line",
          "speakerId": "READER",
          "text": "PRESENT BADGE.",
          "next": "N_MAIN_MENU"
        },
        {
          "id": "N_MAIN_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_PRESENT_BADGE",
              "text": "use: Present badge.",
              "next": "N_USE_HERE"
            },
            {
              "id": "C_ASK_TRAINING_DATE",
              "text": "ask: \u201cTraining date?\u201d",
              "next": "N_MAIN_ASK_TRAINING_PLAYER"
            },
            {
              "id": "C_LOOK_READER",
              "text": "look: Inspect the card reader.",
              "next": "N_LOOK_READER_NARR"
            },
            {
              "id": "C_LOOK_TUBE_PLATE",
              "text": "look: Read the pneumatic tube label plate.",
              "next": "N_LOOK_TUBE_NARR"
            },
            {
              "id": "C_TALK_CALLBOX",
              "text": "talk: Press the call box button.",
              "next": "N_TALK_CALLBOX_NARR1"
            },
            {
              "id": "C_LEAVE_STEP_AWAY",
              "text": "leave: Step away.",
              "next": "N_WALK_AWAY_NARR"
            }
          ]
        },
        {
          "id": "N_USE_HERE",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Here.",
          "next": "N_NARRATOR_SWIPE"
        },
        {
          "id": "N_NARRATOR_SWIPE",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You swipe. The reader accepts the motion with a careful beep.",
          "next": "N_READER_TRAINING_PROMPT"
        },
        {
          "id": "N_READER_TRAINING_PROMPT",
          "type": "npc_line",
          "speakerId": "READER",
          "text": "BADGE READ: VALID FORMAT.\nENTER TRAINING DATE.",
          "next": "N_TRAINING_MENU"
        },
        {
          "id": "N_TRAINING_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_ASK_WHAT_TRAINING",
              "text": "ask: \u201cWhat training?\u201d",
              "next": "N_ASK_WHAT_TRAINING_PLAYER"
            },
            {
              "id": "C_ASK_WHY_DOOR",
              "text": "ask: \u201cWhy does a door need a date?\u201d",
              "next": "N_ASK_WHY_DOOR_PLAYER"
            },
            {
              "id": "C_USE_ENTER_DATE",
              "text": "use: Try entering a date.",
              "next": "N_USE_ENTER_DATE_PLAYER"
            },
            {
              "id": "C_USE_PRINT_HELP",
              "text": "use: Request help / print instructions.",
              "next": "N_USE_PRINT_HELP_READER"
            },
            {
              "id": "C_PERSUADE_OLEA_OVERRIDE",
              "text": "persuade: \u201cOverride. OLEA field ops.\u201d",
              "conditions": [
                {
                  "key": "player.factions",
                  "op": "in",
                  "value": "OLEA"
                }
              ],
              "next": "N_PERSUADE_OLEA_PLAYER"
            },
            {
              "id": "C_BACK_TO_MAIN",
              "text": "leave: Back.",
              "next": "N_MAIN_MENU"
            }
          ]
        },
        {
          "id": "N_ASK_WHAT_TRAINING_PLAYER",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "What training?",
          "next": "N_ASK_WHAT_TRAINING_READER"
        },
        {
          "id": "N_ASK_WHAT_TRAINING_READER",
          "type": "npc_line",
          "speakerId": "READER",
          "text": "TRAINING DATE REQUIRED.\nCONSULT RECORDS.\nENTRY FIELD MUST MATCH RECORDS.",
          "next": "N_TRAINING_MENU"
        },
        {
          "id": "N_ASK_WHY_DOOR_PLAYER",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Why does a door need a date?",
          "next": "N_ASK_WHY_DOOR_READER"
        },
        {
          "id": "N_ASK_WHY_DOOR_READER",
          "type": "npc_line",
          "speakerId": "READER",
          "text": "ACCESS REQUIRES CURRENT TRAINING DATE.\n\u201cCURRENT\u201d DEFINED BY RECORDS.\nCONSULT RECORDS.",
          "next": "N_TRAINING_MENU"
        },
        {
          "id": "N_USE_ENTER_DATE_PLAYER",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Try entering a date.",
          "next": "N_USE_ENTER_DATE_NARR"
        },
        {
          "id": "N_USE_ENTER_DATE_NARR",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The keypad is membrane-soft. It feels like pressing old office equipment that resents being used.",
          "next": "N_USE_ENTER_DATE_READER"
        },
        {
          "id": "N_USE_ENTER_DATE_READER",
          "type": "npc_line",
          "speakerId": "READER",
          "text": "INVALID.\nFORMAT ACCEPTED. VALUE REJECTED.\nCONSULT RECORDS.",
          "next": "N_TRAINING_MENU"
        },
        {
          "id": "N_PERSUADE_OLEA_PLAYER",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Override. OLEA field ops.",
          "next": "N_PERSUADE_OLEA_READER"
        },
        {
          "id": "N_PERSUADE_OLEA_READER",
          "type": "npc_line",
          "speakerId": "READER",
          "text": "NO OVERRIDE CATEGORY LISTED FOR \u201cFIELD OPS.\u201d\nTHIS IS NOT A DENIAL. THIS IS A MISSING PATH.\nCONSULT RECORDS.",
          "next": "N_TRAINING_MENU"
        },
        {
          "id": "N_USE_PRINT_HELP_READER",
          "type": "npc_line",
          "speakerId": "READER",
          "text": "ASSISTANCE MATERIAL AVAILABLE.\nPRINTING.",
          "next": "N_PRINT_CLICK_NARR1"
        },
        {
          "id": "N_PRINT_CLICK_NARR1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Something inside the housing clicks twice, like it\u2019s double-checking it\u2019s allowed to be helpful.",
          "next": "N_PRINT_CLICK_NARR2"
        },
        {
          "id": "N_PRINT_CLICK_NARR2",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "A narrow slip feeds out into the tray.",
          "next": "N_SLIP_MENU"
        },
        {
          "id": "N_SLIP_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_LOOK_READ_SLIP",
              "text": "look: Read the slip.",
              "next": "N_SLIP_LOOK_PLAYER"
            },
            {
              "id": "C_USE_TAKE_SLIP",
              "text": "use: Take the slip.",
              "next": "N_SLIP_TAKE_NARR"
            },
            {
              "id": "C_USE_TRY_READER_AGAIN",
              "text": "use: Try the reader again.",
              "next": "N_RETRY_NARR"
            },
            {
              "id": "C_LEAVE_WALK_AWAY",
              "text": "leave: Walk away.",
              "next": "N_MAIN_MENU"
            }
          ]
        },
        {
          "id": "N_SLIP_LOOK_PLAYER",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "That\u2019s it.",
          "next": "N_SLIP_LOOK_NARR"
        },
        {
          "id": "N_SLIP_LOOK_NARR",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The ink is sharp, official.\n\nTRAINING DATE REQUIRED.\nCONSULT RECORDS.\n\nThe message can be reused indefinitely.",
          "next": "N_SLIP_MENU"
        },
        {
          "id": "N_SLIP_TAKE_NARR",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You pocket it for the binder. The reader goes idle without apologizing.",
          "next": "N_END_COLLECT_SLIP"
        },
        {
          "id": "N_END_COLLECT_SLIP",
          "type": "end",
          "outcomeId": "collect_training_required_slip",
          "effects": [
            {
              "key": "paperwork.trainingSlipCollected",
              "action": "set",
              "value": true
            },
            {
              "key": "inventory.items",
              "action": "add",
              "value": "ITEM_TRAINING_DATE_REQUIRED_SLIP"
            },
            {
              "key": "paperwork.completeness",
              "action": "increment",
              "value": 1
            },
            {
              "key": "objectives.resolveTrainingDateGate",
              "action": "set",
              "value": true
            }
          ]
        },
        {
          "id": "N_RETRY_NARR",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You swipe again, because repetition is sometimes how systems admit you\u2019re real.",
          "next": "N_RETRY_READER"
        },
        {
          "id": "N_RETRY_READER",
          "type": "npc_line",
          "speakerId": "READER",
          "text": "ENTER TRAINING DATE.",
          "next": "N_TRAINING_MENU"
        },
        {
          "id": "N_MAIN_ASK_TRAINING_PLAYER",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Training date?",
          "next": "N_MAIN_ASK_TRAINING_READER"
        },
        {
          "id": "N_MAIN_ASK_TRAINING_READER",
          "type": "npc_line",
          "speakerId": "READER",
          "text": "ENTER TRAINING DATE.\nCONSULT RECORDS FOR ACCEPTED VALUE.",
          "next": "N_MAIN_MENU"
        },
        {
          "id": "N_LOOK_READER_NARR",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The casing is municipal-standard. (pause) The screws are not. (pause)\nA small sticker says LAST CERTIFIED: [illegible], (pause) like someone didn\u2019t want a year to be a promise. (pause)\n\nThe display waits, patiently hostile.",
          "next": "N_READER_BADGE"
        },
        {
          "id": "N_LOOK_TUBE_NARR",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Brass plate, riveted to painted steel:\n\u201cRECORDS/FORMS\u2014OUTBOUND ONLY.\u201d\nArrow toward shack, as-if comforting.",
          "next": "N_MAIN_MENU"
        },
        {
          "id": "N_TALK_CALLBOX_NARR1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The button depresses with a sticky, reluctant travel.",
          "next": "N_CALLBOX_LINE"
        },
        {
          "id": "N_CALLBOX_LINE",
          "type": "npc_line",
          "speakerId": "CALLBOX",
          "text": "This line is monitored for emergencies and compliance statements.\nState your badge number and your training date.",
          "next": "N_CALLBOX_PLAYER"
        },
        {
          "id": "N_CALLBOX_PLAYER",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "I don\u2019t have the date.",
          "next": "N_CALLBOX_REPLY"
        },
        {
          "id": "N_CALLBOX_REPLY",
          "type": "npc_line",
          "speakerId": "CALLBOX",
          "text": "Then I can\u2019t log the call as a call.\nI can log it as an attempt.\nConsult Records.",
          "next": "N_MAIN_MENU"
        },
        {
          "id": "N_WALK_AWAY_NARR",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The reader returns to its first demand, as if nothing here ever changed.",
          "next": "N_END_NO_OUTCOME"
        },
        {
          "id": "N_END_NO_OUTCOME",
          "type": "end"
        }
      ]
    }
  ]
}