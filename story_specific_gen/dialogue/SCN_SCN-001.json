{
  "dialogueGraphs": [
    {
      "id": "DG_SPINDLE_GATE_TUTORIAL",
      "sceneId": "SCN-001",
      "startNodeId": "N_INTRO_1",
      "nodes": [
        {
          "id": "N_INTRO_1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Road dead-ends at a chain-link gate. Keypad bolted on like an afterthought. (pause) Past it\u2014industrial quiet and that thin electrical hum that won\u2019t quit. (pause) You feel it in your teeth and decide you didn\u2019t."
        },
        {
          "id": "N_INTRO_2",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "A signpost sits by the keypad, layered with placards\u2014sun-bleached under newer\u2014trying to look official.",
          "next": "N_INTRO_3"
        },
        {
          "id": "N_INTRO_3",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Alright\u2014things to check: trunk/equipment case. (pause) Gate keypad and receipt slot. (pause) Layered signpost. Debris pile by fence line. (pause) Instrument conduit box. Exterior ground service hatch.",
          "next": "N_MAIN_MENU"
        },
        {
          "id": "N_MAIN_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_KEYPAD",
              "text": "use Gate keypad and receipt slot.",
              "next": "N_KEYPAD_DESC"
            },
            {
              "id": "C_TALK_INTERCOM",
              "text": "talk Intercom.",
              "next": "N_INTERCOM_DESC"
            }
          ]
        },
        {
          "id": "R_MAIN",
          "type": "redirect",
          "target": "N_MAIN_MENU"
        },
        {
          "id": "N_INTERCOM_DESC",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Brushed-metal speaker grille above the keypad\u2014newer than the fence. (pause) Sticker: FOR ASSISTANCE, PRESS AND STATE PURPOSE. (pause) It\u2019s been stuck back on at least twice.",
          "next": "N_INTERCOM_PLAYER_CALL"
        },
        {
          "id": "N_INTERCOM_PLAYER_CALL",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Gate assistance.",
          "next": "N_SECURITY_GREETING"
        },
        {
          "id": "N_SECURITY_GREETING",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "Okay\u2014hi\u2014one moment. I\u2019m going to note you initiated contact, for the record.\nState your name, your organization, and whether you are attempting entry for work or for access.",
          "next": "N_INTERCOM_MENU"
        },
        {
          "id": "N_INTERCOM_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_ASK_DIFF",
              "text": "ask Is there a difference?",
              "next": "N_PLAYER_ASK_DIFF"
            },
            {
              "id": "C_SHOW_BADGE",
              "text": "show OLEA work order and badge.",
              "conditions": [
                {
                  "key": "player.factions",
                  "op": "in",
                  "value": "OLEA"
                }
              ],
              "next": "N_PLAYER_SHOW_BADGE"
            },
            {
              "id": "C_ASK_SIGNS_INTERCOM",
              "text": "ask Why is the signage contradictory?",
              "next": "N_PLAYER_ASK_SIGNS"
            },
            {
              "id": "C_USE_KEYPAD_INTERCOM",
              "text": "use I\u2019m using the keypad.",
              "next": "N_SECURITY_USE_KEYPAD"
            },
            {
              "id": "C_LEAVE_BACK_INTERCOM",
              "text": "leave Back.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_PLAYER_ASK_DIFF",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Is there a difference?",
          "next": "N_SECURITY_DIFF"
        },
        {
          "id": "N_SECURITY_DIFF",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "Yes. Not practically\u2014procedurally.\nWork implies an assigned scope with a dispatch number. Access implies you are here to be on site.\nI don\u2019t decide which you are. I just label the call so nobody later says I \u201cauthorized\u201d something.\nAlso: if you say access, it triggers the visitor script and I hate the visitor script.",
          "next": "N_INTERCOM_MENU"
        },
        {
          "id": "N_PLAYER_SHOW_BADGE",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "OLEA. Work order\u2019s current.",
          "next": "N_SECURITY_BADGE_A"
        },
        {
          "id": "N_SECURITY_BADGE_A",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "Copy. OLEA field systems. That\u2019s\u2026 better than vendor, on paper.\nHold the badge to the camera\u2014slowly. The camera is temperamental, and if it fails it becomes an incident, which is a whole different folder.",
          "next": "N_SECURITY_BADGE_B"
        },
        {
          "id": "N_SECURITY_BADGE_B",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You lift your badge to the little dome camera. The lens clicks, hunting focus.",
          "next": "N_SECURITY_BADGE_C"
        },
        {
          "id": "N_SECURITY_BADGE_C",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "Got it. I\u2019m logging verification attempted. Not verified.\nBecause the camera doesn\u2019t do attestations. It does images.",
          "next": "N_INTERCOM_MENU_VERIFIED"
        },
        {
          "id": "N_INTERCOM_MENU_VERIFIED",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_ASK_OPEN_GATE",
              "text": "ask Can you open the gate?",
              "next": "N_PLAYER_ASK_OPEN_GATE"
            },
            {
              "id": "C_PERSUADE_CYCLE",
              "text": "persuade Request a gate cycle now.",
              "checks": [
                {
                  "type": "skill",
                  "skill": "bureaucracy",
                  "dc": 12
                }
              ],
              "onPassNext": "N_SECURITY_CYCLE_PASS",
              "onFailNext": "N_SECURITY_CYCLE_FAIL"
            },
            {
              "id": "C_ASK_SIGNS_VERIFIED",
              "text": "ask Why do the signs conflict?",
              "next": "N_PLAYER_ASK_SIGNS"
            },
            {
              "id": "C_USE_KEYPAD_VERIFIED",
              "text": "use Keypad.",
              "next": "N_SECURITY_USE_KEYPAD"
            },
            {
              "id": "C_LEAVE_BACK_VERIFIED",
              "text": "leave Back.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_PLAYER_ASK_OPEN_GATE",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Can you open the gate?",
          "next": "N_SECURITY_OPEN_GATE"
        },
        {
          "id": "N_SECURITY_OPEN_GATE",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "I can request a cycle. I cannot open it.\nIf I open it, I\u2019m the last human decision in the chain, and then my name is in a deposition slideshow.\nUse the keypad. It prints a receipt. The receipt proves you didn\u2019t slip in, which\u2014again\u2014becomes my problem.",
          "next": "N_INTERCOM_MENU_VERIFIED"
        },
        {
          "id": "N_SECURITY_CYCLE_PASS",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "Okay. I submitted a cycle request. That is me requesting, not authorizing.\nIf the gate controller accepts it, you\u2019ll hear a relay click. If it ignores it, that\u2019s also a valid outcome, technically.",
          "next": "N_INTERCOM_MENU_VERIFIED"
        },
        {
          "id": "N_SECURITY_CYCLE_FAIL",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "No. If I put my hands on a cycle request without a matching dispatch entry, it auto-flags as discretionary.\nDiscretionary is how you get invited to explain yourself to people with clipboards.",
          "next": "N_INTERCOM_MENU_VERIFIED"
        },
        {
          "id": "N_PLAYER_ASK_SIGNS",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Why is the signage contradictory?",
          "next": "N_SECURITY_LAYERED"
        },
        {
          "id": "N_SECURITY_LAYERED",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "It\u2019s not contradictory. It\u2019s layered. There\u2019s a difference.\nSite Closed is the status. Authorized Personnel is the exception. Visitor Check-in is\u2026 historical.\nFacilities won\u2019t remove signs without a removal form. Compliance won\u2019t approve removal without photos of the current state.\nSo we preserve the current state.\nWhich is: all signs remain. Forever. Like sediment.",
          "next": "N_INTERCOM_SIGNS_MENU"
        },
        {
          "id": "N_INTERCOM_SIGNS_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_LOG_FROM_INTERCOM",
              "text": "use Log signage conflict.",
              "conditions": [
                {
                  "key": "compliance.signConflictLogged",
                  "op": "!=",
                  "value": true
                }
              ],
              "effects": [
                {
                  "key": "story.act",
                  "action": "set",
                  "value": 1
                },
                {
                  "key": "compliance.signConflictLogged",
                  "action": "set",
                  "value": true
                },
                {
                  "key": "objectives.resolveSignageConflict",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "N_LOG_1"
            },
            {
              "id": "C_ASK_PHOTOS",
              "text": "ask Who do I send the photos to?",
              "next": "N_PLAYER_ASK_PHOTOS"
            },
            {
              "id": "C_USE_KEYPAD_FROM_SIGNS",
              "text": "use Keypad.",
              "next": "N_KEYPAD_DESC"
            },
            {
              "id": "C_LEAVE_BACK_FROM_SIGNS",
              "text": "leave Back.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_PLAYER_ASK_PHOTOS",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Who gets the photos?",
          "next": "N_SECURITY_PHOTOS"
        },
        {
          "id": "N_SECURITY_PHOTOS",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "Not me. Respectfully.\nIf you send them to me, I receive notice, and then I\u2019m obligated to act, and then I can\u2019t, and then I\u2019m noncompliant.\nSend to your OLEA compliance mailbox, whatever it\u2019s called this week. Attach the gate location.\nAnd\u2014small thing\u2014please don\u2019t call it a hazard unless someone is actively bleeding. Hazard triggers alarms.",
          "next": "N_INTERCOM_SIGNS_MENU"
        },
        {
          "id": "N_SECURITY_USE_KEYPAD",
          "type": "npc_line",
          "speakerId": "SECURITY_DISPATCH",
          "text": "Copy. Use the keypad and keep the receipt.\nThe receipt is the only part of this process that doesn\u2019t argue back later.",
          "next": "N_KEYPAD_DESC"
        },
        {
          "id": "N_KEYPAD_DESC",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Keypad\u2019s clean enough to touch. (pause) Somebody\u2019s \u201caround,\u201d just not here. (pause) Slot under it: RECEIPT\u2014RETAIN FOR YOUR RECORDS. (pause) Screen: ENTER CODE OR SELECT: ASSISTANCE / VISITOR / MAINTENANCE.",
          "next": "N_KEYPAD_MENU"
        },
        {
          "id": "N_KEYPAD_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_MAINT",
              "text": "use Select MAINTENANCE.",
              "next": "N_KEYPAD_MAINT"
            },
            {
              "id": "C_USE_VISITOR",
              "text": "use Select VISITOR.",
              "next": "N_KEYPAD_VISITOR"
            },
            {
              "id": "C_TALK_INTERCOM_FROM_KEYPAD",
              "text": "talk Intercom.",
              "next": "N_INTERCOM_DESC"
            },
            {
              "id": "C_LEAVE_BACK_FROM_KEYPAD",
              "text": "leave Back.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_KEYPAD_MAINT",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You hit MAINTENANCE. (pause)\nIt hangs for a second. (pause)\n\nMAINTENANCE REQUIRES ACTIVE SIGN-IN LOCATION. (pause)\nPLEASE PROCEED TO KIOSK. (pause)\n\nPrinter still whirs and spits a blank strip anyway. (pause)\n\nBlank receipt in your hand. (pause)\nLike that\u2019s your fault.",
          "next": "N_KEYPAD_MAINT_MENU"
        },
        {
          "id": "N_KEYPAD_MAINT_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_LOOK_SIGNPOST_FROM_MAINT",
              "text": "look Layered signpost.",
              "next": "N_SIGNPOST_DESC"
            },
            {
              "id": "C_LEAVE_ADMIN_FROM_MAINT",
              "text": "leave Go to Admin Lobby and Kiosk.",
              "checks": [
                {
                  "type": "flag",
                  "key": "compliance.signConflictLogged",
                  "value": true
                }
              ],
              "onPassNext": "END_TO_ADMIN_LOGGED",
              "onFailNext": "N_LEAVE_CONFIRM_ADMIN"
            },
            {
              "id": "C_LEAVE_BACK_FROM_MAINT",
              "text": "leave Back.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_KEYPAD_VISITOR",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You press VISITOR. Screen brightens like it\u2019s happy about it. (pause)\n\nWELCOME. SITE CLOSED. PLEASE WAIT FOR ESCORT. (pause)\nReceipt prints: WAITING. (pause)\n\nGate stays shut.",
          "next": "N_KEYPAD_VISITOR_MENU"
        },
        {
          "id": "N_KEYPAD_VISITOR_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_TALK_INTERCOM_FROM_VISITOR",
              "text": "talk Intercom.",
              "next": "N_INTERCOM_DESC"
            },
            {
              "id": "C_USE_LOG_FROM_VISITOR",
              "text": "use Log signage conflict.",
              "conditions": [
                {
                  "key": "compliance.signConflictLogged",
                  "op": "!=",
                  "value": true
                }
              ],
              "effects": [
                {
                  "key": "story.act",
                  "action": "set",
                  "value": 1
                },
                {
                  "key": "compliance.signConflictLogged",
                  "action": "set",
                  "value": true
                },
                {
                  "key": "objectives.resolveSignageConflict",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "N_LOG_1"
            },
            {
              "id": "C_LEAVE_BACK_FROM_VISITOR",
              "text": "leave Back.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_TRUNK_DESC",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "In the trunk: an equipment case\u2014label maker, inspection tags, battered tablet. (pause) Binder spine reads CLOSURE\u2014SPINDLE in faded ink. (pause) The binder\u2019s heavier than it needs to be. Like it\u2019s daring you to argue with it.",
          "next": "N_TRUNK_MENU"
        },
        {
          "id": "N_TRUNK_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_TABLET",
              "text": "use Take out tablet/camera.",
              "next": "N_TRUNK_TABLET"
            },
            {
              "id": "C_USE_TAGS",
              "text": "use Take out inspection tags.",
              "next": "N_TRUNK_TAGS"
            },
            {
              "id": "C_LEAVE_BACK_FROM_TRUNK",
              "text": "leave Back.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_TRUNK_TABLET",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You power up the tablet. It drops straight into the OLEA field form stack. No questions.",
          "next": "N_TRUNK_TABLET_MENU"
        },
        {
          "id": "N_TRUNK_TABLET_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_LOG_FROM_TABLET",
              "text": "use Log signage conflict.",
              "conditions": [
                {
                  "key": "compliance.signConflictLogged",
                  "op": "!=",
                  "value": true
                }
              ],
              "effects": [
                {
                  "key": "story.act",
                  "action": "set",
                  "value": 1
                },
                {
                  "key": "compliance.signConflictLogged",
                  "action": "set",
                  "value": true
                },
                {
                  "key": "objectives.resolveSignageConflict",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "N_LOG_1"
            },
            {
              "id": "C_LOOK_SIGNPOST_FROM_TABLET",
              "text": "look Layered signpost.",
              "next": "N_SIGNPOST_DESC"
            },
            {
              "id": "C_LEAVE_BACK_FROM_TABLET",
              "text": "leave Back.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_TRUNK_TAGS",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You thumb through tags: DO NOT OPERATE, OUT OF SERVICE, PENDING REVIEW. (pause)\nNothing says \u201cthis sign is lying.\u201d Of course.",
          "next": "N_TRUNK_TAGS_MENU"
        },
        {
          "id": "N_TRUNK_TAGS_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_LOG_FROM_TAGS",
              "text": "use Log signage conflict.",
              "conditions": [
                {
                  "key": "compliance.signConflictLogged",
                  "op": "!=",
                  "value": true
                }
              ],
              "effects": [
                {
                  "key": "story.act",
                  "action": "set",
                  "value": 1
                },
                {
                  "key": "compliance.signConflictLogged",
                  "action": "set",
                  "value": true
                },
                {
                  "key": "objectives.resolveSignageConflict",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "N_LOG_1"
            },
            {
              "id": "C_LOOK_SIGNPOST_FROM_TAGS",
              "text": "look Layered signpost.",
              "next": "N_SIGNPOST_DESC"
            },
            {
              "id": "C_LEAVE_BACK_FROM_TAGS",
              "text": "leave Back.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_LEAVE_CONFIRM_ADMIN",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You can go ahead. (pause) You won\u2019t have a dated note: the signs were wrong when you arrived. (pause) That gap won\u2019t stay quiet.",
          "next": "N_LEAVE_CONFIRM_ADMIN_MENU"
        },
        {
          "id": "N_LEAVE_CONFIRM_ADMIN_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_LEAVE_ANYWAY_ADMIN",
              "text": "leave Leave anyway.",
              "next": "END_TO_ADMIN_EARLY"
            },
            {
              "id": "C_USE_LOG_FIRST_ADMIN",
              "text": "use Log it first.",
              "next": "N_SIGNPOST_DESC"
            },
            {
              "id": "C_LEAVE_STAY_ADMIN",
              "text": "leave Stay here.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "N_LEAVE_CONFIRM_GUARD",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Walk over, sure. Get gate steps first. Or you'll later explain following one sign, ignoring another.",
          "next": "N_LEAVE_CONFIRM_GUARD_MENU"
        },
        {
          "id": "N_LEAVE_CONFIRM_GUARD_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_LEAVE_ANYWAY_GUARD",
              "text": "leave Leave anyway.",
              "next": "END_TO_GUARD_EARLY"
            },
            {
              "id": "C_USE_LOG_FIRST_GUARD",
              "text": "use Log it first.",
              "next": "N_SIGNPOST_DESC"
            },
            {
              "id": "C_LEAVE_STAY_GUARD",
              "text": "leave Stay here.",
              "next": "R_MAIN"
            }
          ]
        },
        {
          "id": "END_TO_ADMIN_EARLY",
          "type": "end",
          "exitTo": "Admin Lobby and Kiosk"
        },
        {
          "id": "END_TO_GUARD_EARLY",
          "type": "end",
          "exitTo": "Guard Shack Exterior - right"
        },
        {
          "id": "END_TO_ADMIN_LOGGED",
          "type": "end",
          "outcomeId": "arrive_and_log_context",
          "exitTo": "Admin Lobby and Kiosk"
        },
        {
          "id": "END_TO_GUARD_LOGGED",
          "type": "end",
          "outcomeId": "arrive_and_log_context",
          "exitTo": "Guard Shack Exterior - right"
        },
        {
          "choices": [
            {
              "id": "C_LEAVE_BACK_POSTLOG",
              "next": "R_MAIN",
              "text": "leave Back."
            },
            {
              "id": "C_TALK_INTERCOM_POSTLOG",
              "next": "N_INTERCOM_DESC",
              "text": "talk Intercom."
            }
          ],
          "id": "N_POST_LOG_MENU",
          "speakerId": "PLAYER",
          "type": "player_choice"
        }
      ]
    }
  ]
}