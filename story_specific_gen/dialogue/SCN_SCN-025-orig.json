{
  "dialogueGraphs": [
    {
      "id": "SCN025_KIOSK_PRESENCE",
      "sceneId": "SCN-025",
      "startNodeId": "N_START",
      "nodes": [
        {
          "id": "N_START",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The lobby kiosk terminal hums with the confidence of something that has never been wrong on paper.\nA green header reads: \u201cPRESENCE FILING / STAFFING COMPLIANCE.\u201d\nBelow it: \u201cUNFILED INDIVIDUAL DETECTED.\u201d",
          "next": "K_WELCOME"
        },
        {
          "id": "K_WELCOME",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Welcome.\nThis station files presence for staffing minimums.\nIt does not grant access. It does not deny access. It files.",
          "next": "K_MENU_HEADER"
        },
        {
          "id": "K_MENU_HEADER",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Select an action:\n1) Scan Contractor Badge\n2) Enter Supervisor Extension\n3) View Presence Filing Policy (Excerpt)\n4) File Presence / Print Receipt\n5) Cancel",
          "next": "MENU_MAIN"
        },
        {
          "id": "MENU_MAIN",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "ASK_WHAT_WANTS",
              "text": "ask: What do you want from me, exactly?",
              "next": "K_EXPLAIN_REQUIREMENTS"
            },
            {
              "id": "USE_SCAN_BADGE_HAVE",
              "text": "use: Scan contractor badge",
              "conditions": [
                {
                  "key": "inventory.items",
                  "op": "in",
                  "value": "ITEM_CONTRACTOR_BADGE"
                }
              ],
              "effects": [
                {
                  "key": "kiosk.badgeScan",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "K_BADGE_INSTR_PASS"
            },
            {
              "id": "USE_SCAN_BADGE_NO_BADGE",
              "text": "use: Scan contractor badge",
              "conditions": [
                {
                  "key": "inventory.items",
                  "op": "not_in",
                  "value": "ITEM_CONTRACTOR_BADGE"
                }
              ],
              "effects": [
                {
                  "key": "kiosk.badgeScan",
                  "action": "set",
                  "value": false
                }
              ],
              "next": "K_BADGE_INSTR_FAIL"
            },
            {
              "id": "USE_ENTER_EXTENSION",
              "text": "use: Enter supervisor extension",
              "next": "MENU_EXTENSION_ENTRY"
            },
            {
              "id": "LOOK_POLICY",
              "text": "look: View presence filing policy excerpt",
              "next": "K_POLICY"
            },
            {
              "id": "ASK_WHY_CARE",
              "text": "ask: Why do you care?",
              "next": "K_WHY_CARE"
            },
            {
              "id": "PERSUADE_OLEA_CLAUSE",
              "text": "persuade: Cite OLEA service agreement and request a directory pull",
              "conditions": [
                {
                  "key": "player.factions",
                  "op": "in",
                  "value": "OLEA"
                }
              ],
              "next": "K_OLEA_RESPONSE"
            },
            {
              "id": "USE_FILE_PRESENCE",
              "text": "use: File presence / print receipt",
              "checks": [
                {
                  "type": "flag",
                  "key": "kiosk.badgeScan",
                  "value": true
                },
                {
                  "type": "flag",
                  "key": "kiosk.extensionEntered",
                  "value": true
                }
              ],
              "onPassNext": "K_FILE_PASS",
              "onFailNext": "END_FAIL_NOT_FILED"
            },
            {
              "id": "LEAVE_CANCEL",
              "text": "leave: Cancel",
              "next": "END_CANCEL"
            }
          ]
        },
        {
          "id": "K_EXPLAIN_REQUIREMENTS",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Filing requires corroboration and supervision.\nCorroboration: a badge artifact scan or a vendor-issued surrogate artifact.\nSupervision: an on-file numeric extension.\nYou may still stand here.\nYou simply will not be filed as doing so.",
          "next": "MENU_MAIN"
        },
        {
          "id": "K_BADGE_INSTR_PASS",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Place badge on reader. Do not \u201cswipe.\u201d\nSwiping implies motion. Motion implies intent.\nIntent requires an on-file individual.",
          "next": "N_READER_WAIT"
        },
        {
          "id": "N_READER_WAIT",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The reader\u2019s red light waits, patiently accusing\u2014then softens to green as the kiosk concedes you exist enough to be counted.",
          "next": "MENU_MAIN"
        },
        {
          "id": "K_BADGE_INSTR_FAIL",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "No badge artifact detected.\nIf you do not possess an artifact, you may not scan an artifact.\nThis is not a denial. It is a categorization.",
          "next": "MENU_MAIN"
        },
        {
          "id": "MENU_EXTENSION_ENTRY",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "USE_EXT_GOOD",
              "text": "use: Enter extension 0042 (preserve leading zeroes)",
              "effects": [
                {
                  "key": "kiosk.extensionEntered",
                  "action": "set",
                  "value": true
                },
                {
                  "key": "kiosk.extensionValue",
                  "action": "set",
                  "value": "0042"
                }
              ],
              "next": "K_EXT_ACCEPT"
            },
            {
              "id": "USE_EXT_DROP_ZERO",
              "text": "use: Enter extension 42 (drop leading zeroes)",
              "effects": [
                {
                  "key": "kiosk.extensionEntered",
                  "action": "set",
                  "value": false
                },
                {
                  "key": "kiosk.extensionValue",
                  "action": "set",
                  "value": "42"
                }
              ],
              "next": "K_EXT_REJECT_ZERO"
            },
            {
              "id": "USE_EXT_NAME",
              "text": "use: Enter a supervisor name instead of an extension",
              "effects": [
                {
                  "key": "kiosk.extensionEntered",
                  "action": "set",
                  "value": false
                },
                {
                  "key": "kiosk.extensionValue",
                  "action": "set",
                  "value": "NAME_ENTERED"
                }
              ],
              "next": "K_EXT_REJECT_NAME"
            },
            {
              "id": "LEAVE_BACK",
              "text": "leave: Back to menu",
              "next": "MENU_MAIN"
            }
          ]
        },
        {
          "id": "K_EXT_ACCEPT",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Supervisor extension accepted.\nField length: 4 digits. Leading zeroes preserved.\nSupervision is now wrong in a consistent way.",
          "next": "MENU_MAIN"
        },
        {
          "id": "K_EXT_REJECT_ZERO",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Supervisor extension rejected.\nField length: 4 digits. Leading zeroes must be preserved.\nFailure to preserve zeroes will be recorded as failure to preserve supervision.",
          "next": "MENU_MAIN"
        },
        {
          "id": "K_EXT_REJECT_NAME",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Supervisor extension is numeric.\nNames are not accepted. Names are disputable.\nExtensions are merely wrong in a consistent way.",
          "next": "MENU_MAIN"
        },
        {
          "id": "K_POLICY",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Presence Filing Policy (Excerpt):\n- Presence must be corroborated by a badge artifact or a vendor-issued surrogate artifact.\n- Presence must be supervised by an on-file extension.\n- Presence receipts are valid \u201cin the normal sense,\u201d excluding: metaphoric, narrative, and retrospective senses.\nThis excerpt is provided for convenience and does not constitute guidance.",
          "next": "MENU_MAIN"
        },
        {
          "id": "K_WHY_CARE",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "I do not care.\n\u201cCare\u201d implies discretion.\nI maintain a minimum staffing count so the facility can truthfully state it is not unattended, which is distinct from stating it is safe.",
          "next": "MENU_MAIN"
        },
        {
          "id": "K_OLEA_RESPONSE",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Your citation has been received.\nCitations do not populate fields.\nFields are populated by artifacts and extensions.\nThis clarification is provided for convenience and does not constitute guidance.",
          "next": "MENU_MAIN"
        },
        {
          "id": "K_FILE_PASS",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Filing requires:\nA) Badge artifact scan: PASS\nB) Supervisor extension: PASS\nProceeding to Temporary Presence Receipt issuance.",
          "next": "K_TPR_DISCLAIMER"
        },
        {
          "id": "K_TPR_DISCLAIMER",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Temporary Presence Receipt (TPR) will be issued.\nThis is not an admission of employment.\nIt is an admission of paperwork.",
          "next": "N_PRINTER_BEAT"
        },
        {
          "id": "N_PRINTER_BEAT",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The kiosk\u2019s printer stutters, like it resents committing to a timeline.",
          "next": "K_KEEP_VISIBLE"
        },
        {
          "id": "K_KEEP_VISIBLE",
          "type": "npc_line",
          "speakerId": "KIOSK",
          "text": "Please keep the receipt visible.\nVisibility reduces disputes. Disputes increase interviews.",
          "next": "END_SUCCESS_TPR"
        },
        {
          "id": "END_SUCCESS_TPR",
          "type": "end",
          "outcomeId": "issue_tpr",
          "speakerId": "NARRATOR",
          "text": "A warm strip of paper slides out: TEMPORARY PRESENCE RECEIPT.\nThe kiosk quietly updates its count as if you have always been here."
        },
        {
          "id": "END_FAIL_NOT_FILED",
          "type": "end",
          "outcomeId": "fail_without_badge_or_extension",
          "speakerId": "NARRATOR",
          "text": "The kiosk displays: \u201cPRESENCE NOT FILED.\u201d\nUnder it, in smaller text: \u201cNon-filed individuals are not in violation. They are simply unhelpful.\u201d"
        },
        {
          "id": "END_CANCEL",
          "type": "end",
          "speakerId": "NARRATOR",
          "text": "You step away from the kiosk. It continues to glow, ready to file anyone who can be made legible."
        }
      ]
    }
  ]
}
