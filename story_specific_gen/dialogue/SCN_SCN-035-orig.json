{
  "dialogueGraphs": [
    {
      "id": "SCN_035_VENT_PANEL",
      "sceneId": "SCN-035",
      "startNodeId": "INTRO",
      "nodes": [
        {
          "id": "INTRO",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The ventilation access panel sits in the service corridor like it was added after someone lost an argument. A plastic window shows a tiny flag: \u201cCLOSED,\u201d or possibly \u201cCL0SED.\u201d The font is doing its best.",
          "next": "MENU_MAIN"
        },
        {
          "id": "MENU_MAIN",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "LOOK_PANEL",
              "text": "look \"Read the label and check the window.\"",
              "next": "LOOK_BEFORE"
            },
            {
              "id": "USE_PANEL",
              "text": "use \"Open the panel and deal with the damper.\"",
              "next": "USE_FIX_AND_SET_OPEN"
            },
            {
              "id": "ASK_LIAISON",
              "text": "ask \"Call the EAC liaison.\"",
              "next": "CALL_LIAISON_MAIN_1"
            },
            {
              "id": "LEAVE_EARLY",
              "text": "leave \"Step back into the corridor.\"",
              "next": "LEAVE_NO_CHANGE_1"
            }
          ]
        },
        {
          "id": "LOOK_BEFORE",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The panel label reads: \u201cSUPPLY DAMPER \u2014 DO NOT ADJUST (UNLESS AUTHORIZED).\u201d Under it, someone has written \u201cAUTHORIZED = ANYONE WITH A PEN,\u201d then crossed that out, carefully.\n\nYour jaw tightens once, then relaxes. You\u2019ve seen worse handwriting on better consequences.\n\nThrough the window: the indicator cable moves. The blade does not. The little status flag continues to report with confidence.",
          "next": "MENU_MAIN"
        },
        {
          "id": "USE_FIX_AND_SET_OPEN",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The quarter-turn latches give with a dry pop. Dust drops in a straight line, as if it has an appointment.\n\nInside: a linkage arm, a return spring, and a damper shaft that\u2019s pretending friction is policy.\n\nYou brace the linkage, take the load off the spring, and work the shaft back and forth until it stops being a negotiation. There\u2019s a faint metallic click\u2014less \u201cfixed,\u201d more \u201cnow it\u2019s your problem.\u201d\n\nThe blade rotates. Air shifts tone in the duct, like someone stopped holding their breath.\n\nYou seat the damper to OPEN and lock the linkage. A green sticker in the panel reads \u201cVERIFY POSITION BY INDICATOR ONLY,\u201d which is bold, considering the indicator has been lying to you for several minutes.",
          "next": "MENU_AFTER_USE"
        },
        {
          "id": "MENU_AFTER_USE",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "LOOK_INDICATOR",
              "text": "look \"Check the indicator window.\"",
              "next": "LOOK_AFTER"
            },
            {
              "id": "USE_CYCLE",
              "text": "use \"Cycle it once. CLOSED \u2192 OPEN.\"",
              "next": "CYCLE_AFTER"
            },
            {
              "id": "ASK_LIAISON_AFTER",
              "text": "ask \"Call the EAC liaison.\"",
              "next": "CALL_LIAISON_AFTER_1"
            },
            {
              "id": "LEAVE_COMMIT",
              "text": "leave \"Step back into the corridor.\"",
              "next": "LEAVE_COMMIT_1"
            }
          ]
        },
        {
          "id": "LOOK_AFTER",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The flag now reads \u201cOPEN.\u201d It also reads \u201cOP EN,\u201d because the plastic window is warped. Close enough for a form.",
          "next": "MENU_AFTER_USE"
        },
        {
          "id": "CYCLE_AFTER",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You swing the damper shut, then open again\u2014one full cycle. The spring returns without drama.\n\nFor a second, you catch yourself waiting for a sound that would justify paperwork. Nothing obliges.",
          "next": "MENU_AFTER_USE"
        },
        {
          "id": "CALL_LIAISON_MAIN_1",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Just so I\u2019m clear (pause) you\u2019re using ventilation controls. (pause) Before we say \u201ccontrols\u201d (pause) is it an operational control (pause) or a maintenance control. (pause) We\u2019re tracking dependencies. (pause) Ventilation is not one. (pause) It\u2019s a prerequisite. (pause) Different box.",
          "next": "CALL_LIAISON_MAIN_2"
        },
        {
          "id": "CALL_LIAISON_MAIN_2",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "It needs to be open.",
          "next": "CALL_LIAISON_MAIN_3"
        },
        {
          "id": "CALL_LIAISON_MAIN_3",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "\u201cNeeds\u201d is a strong word. (pause)\nI\u2019m not disputing airflow\u2019s reality. (pause)\nI\u2019m saying procedurally. (pause)\nWhat is this comparable to? (pause)\n\nIf you set it OPEN (pause)\nI need a basis. (pause)\nSignage. Work order. Checklist line. (pause)\nNot because I doubt you. (pause)\nBecause I doubt future me. (pause)\nWhen I\u2019m asked why I didn\u2019t ask. (pause)",
          "next": "LIAISON_MENU_MAIN"
        },
        {
          "id": "LIAISON_MENU_MAIN",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "SHOW_LINEITEM_MAIN",
              "text": "show \"Show the checklist line item.\"",
              "conditions": [
                {
                  "key": "player.factions",
                  "op": "in",
                  "value": "OLEA"
                }
              ],
              "next": "SHOW_MAIN_1"
            },
            {
              "id": "ASK_CLOSED_MAIN",
              "text": "ask \"What happens if it\u2019s closed?\"",
              "next": "IF_CLOSED_MAIN"
            },
            {
              "id": "PERSUADE_MAIN",
              "text": "persuade \"Log it as a prerequisite and move on.\"",
              "checks": [
                {
                  "type": "skill",
                  "skill": "BUREAUCRACY",
                  "dc": 12
                }
              ],
              "onPassNext": "PERSUADE_MAIN_PASS",
              "onFailNext": "PERSUADE_MAIN_FAIL"
            },
            {
              "id": "LEAVE_CALL_MAIN",
              "text": "leave \"End call.\"",
              "next": "END_CALL_MAIN"
            }
          ]
        },
        {
          "id": "SHOW_MAIN_1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You bring up the closure checklist entry and hold it to the panel like you\u2019re introducing them. Your thumb covers a date field out of habit.",
          "next": "SHOW_MAIN_2"
        },
        {
          "id": "SHOW_MAIN_2",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Good. Great. That\u2019s\u2026 that\u2019s a line. (pause)\nOkay\u2014so it\u2019s not you \u201cadjusting ventilation.\u201d (pause)\nIt\u2019s you \u201csatisfying an interlock prerequisite.\u201d (pause)\nDifferent risks. (pause)\nSame metal. Different liability.",
          "next": "MENU_MAIN"
        },
        {
          "id": "IF_CLOSED_MAIN",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Then the unrelated subsystem\u2014documented as related\u2014keeps permissive. (pause) So you attempt the next sequence. (pause) You get a refusal. (pause) Not a failure. (pause) A refusal. (pause) \u201cFailure\u201d implies fault. (pause) I can\u2019t assign fault to a duct.",
          "next": "MENU_MAIN"
        },
        {
          "id": "PERSUADE_MAIN_PASS",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Fine. (pause) I\u2019ll call it a prerequisite in the log. (pause) If anyone asks, I asked. (pause) That\u2019s the product.",
          "next": "MENU_MAIN"
        },
        {
          "id": "PERSUADE_MAIN_FAIL",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "I can\u2019t \u201cmove on\u201d without a basis. (pause) Otherwise, basis becomes \u201cI didn\u2019t feel like it.\u201d",
          "next": "MENU_MAIN"
        },
        {
          "id": "END_CALL_MAIN",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Please\u2014if you touch it again\u2014(pause) note the time and position. (pause) Not because it matters. (pause) Because someone will insist it mattered.",
          "next": "MENU_MAIN"
        },
        {
          "id": "CALL_LIAISON_AFTER_1",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Just so I\u2019m clear. (pause) You\u2019re interacting with ventilation controls. (pause) Before we call them \u201ccontrols\u201d. (pause) Is it operational. (pause) Or maintenance. (pause) Because we\u2019re tracking dependencies. (pause) Ventilation isn\u2019t one. (pause) It\u2019s a prerequisite. (pause) Different box.",
          "next": "CALL_LIAISON_AFTER_2"
        },
        {
          "id": "CALL_LIAISON_AFTER_2",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "It\u2019s open.",
          "next": "CALL_LIAISON_AFTER_3"
        },
        {
          "id": "CALL_LIAISON_AFTER_3",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "\u201cOpen\u201d is good. (pause) \u201cOpen with basis\u201d is better. (pause) If you set it OPEN (pause) I need a basis. (pause) Signage. (pause) Work order. (pause) Or a checklist line. (pause) Not because I doubt you\u2014 (pause) I doubt future me (pause) when I\u2019m asked why (pause) I didn\u2019t ask.",
          "next": "LIAISON_MENU_AFTER"
        },
        {
          "id": "LIAISON_MENU_AFTER",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "SHOW_LINEITEM_AFTER",
              "text": "show \"Show the checklist line item.\"",
              "conditions": [
                {
                  "key": "player.factions",
                  "op": "in",
                  "value": "OLEA"
                }
              ],
              "next": "SHOW_AFTER_1"
            },
            {
              "id": "ASK_CLOSED_AFTER",
              "text": "ask \"What happens if it\u2019s closed?\"",
              "next": "IF_CLOSED_AFTER"
            },
            {
              "id": "PERSUADE_AFTER",
              "text": "persuade \"Log it as a prerequisite and move on.\"",
              "checks": [
                {
                  "type": "skill",
                  "skill": "BUREAUCRACY",
                  "dc": 12
                }
              ],
              "onPassNext": "PERSUADE_AFTER_PASS",
              "onFailNext": "PERSUADE_AFTER_FAIL"
            },
            {
              "id": "LEAVE_CALL_AFTER",
              "text": "leave \"End call.\"",
              "next": "END_CALL_AFTER"
            }
          ]
        },
        {
          "id": "SHOW_AFTER_1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You bring up the closure checklist entry and hold it to the open panel like you\u2019re introducing them. Your thumb covers a date field out of habit.",
          "next": "SHOW_AFTER_2"
        },
        {
          "id": "SHOW_AFTER_2",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Good. Great. That\u2019s\u2026 that\u2019s a line. (pause) Okay\u2014it's not you \u201cadjusting ventilation,\u201d. (pause) It's you \u201csatisfying an interlock prerequisite.\u201d (pause) Different risks. (pause) Same metal. Different liability.",
          "next": "MENU_AFTER_USE"
        },
        {
          "id": "IF_CLOSED_AFTER",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Then the subsystem is unrelated. (pause) It's documented as related. (pause) It doesn't clear its permissive. (pause) Which means you try the next sequence. (pause) Refused. (pause)\n\nNot a failure. (pause) A refusal. (pause) \u201cFailure\u201d implies fault. (pause) I can't assign fault to a duct.",
          "next": "MENU_AFTER_USE"
        },
        {
          "id": "PERSUADE_AFTER_PASS",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Fine. I\u2019ll log it as a prerequisite. (pause) I asked. You answered. (pause) The universe continues.",
          "next": "MENU_AFTER_USE"
        },
        {
          "id": "PERSUADE_AFTER_FAIL",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "I\u2019m not trying to be difficult. (pause) I\u2019m trying to be quotable. (pause) In six months.",
          "next": "MENU_AFTER_USE"
        },
        {
          "id": "END_CALL_AFTER",
          "type": "npc_line",
          "speakerId": "EAC_LIAISON",
          "text": "Please just\u2014note time and position. (pause) Not because it matters. (pause) Because someone will insist it mattered.",
          "next": "MENU_AFTER_USE"
        },
        {
          "id": "LEAVE_COMMIT_1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You let the panel hang open for a moment, just to confirm nothing re-sticks out of spite. The damper holds position.\n\nThe status reports OPEN.",
          "next": "END_SET_DAMPER_OPEN"
        },
        {
          "id": "END_SET_DAMPER_OPEN",
          "type": "end",
          "outcomeId": "set_damper_open",
          "effects": [
            {
              "key": "ops.ventDamperOpen",
              "action": "set",
              "value": true
            },
            {
              "key": "loadDemand.level",
              "action": "increment",
              "value": 1
            }
          ]
        },
        {
          "id": "LEAVE_NO_CHANGE_1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You step back into the corridor. The panel stays exactly what it was: an argument someone bolted to the wall.",
          "next": "END_NO_CHANGE"
        },
        {
          "id": "END_NO_CHANGE",
          "type": "end"
        }
      ]
    }
  ]
}