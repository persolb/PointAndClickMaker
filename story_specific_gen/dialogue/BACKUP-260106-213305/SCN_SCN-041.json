{
  "dialogueGraphs": [
    {
      "id": "DG_WITNESS_ZONE_IDENTIFICATION",
      "sceneId": "SCN-041",
      "startNodeId": "N_ENTER",
      "nodes": [
        {
          "id": "N_ENTER",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The SPINDLE chamber floor smells like old coolant and new paperwork.\nA dull containment sphere sits in the center, three rotating frames around it\u2014each with maintenance markings that disagree by decade.\nNear the approach, a strip of witness-marker tape makes a neat, legal shape on the floor. It does not match any safety standard you recognize. It matches a form.",
          "next": "PC_HUB"
        },
        {
          "id": "PC_HUB",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_LOOK_SPHERE",
              "text": "look: Containment sphere surface",
              "next": "N_SPHERE_A"
            },
            {
              "id": "C_LOOK_STATUS",
              "text": "look: Status indicator cluster",
              "next": "N_STATUS_A"
            },
            {
              "id": "C_LOOK_PANEL",
              "text": "look: Interface scan panel",
              "next": "N_PANEL_A"
            },
            {
              "id": "C_LOOK_ESTOP",
              "text": "look: Emergency stop",
              "next": "N_ESTOP_A"
            },
            {
              "id": "C_LEAVE_OBS",
              "text": "leave: Observation Deck (down)",
              "checks": [
                {
                  "type": "flag",
                  "key": "knowledge.witnessZoneKnown",
                  "value": true
                }
              ],
              "onPassNext": "N_LEAVE_OBS_KNOWN",
              "onFailNext": "N_LEAVE_OBS_UNKNOWN"
            },
            {
              "id": "C_LEAVE_OVERFLOW",
              "text": "leave: Overflow Intake Concourse",
              "checks": [
                {
                  "type": "flag",
                  "key": "knowledge.witnessZoneKnown",
                  "value": true
                }
              ],
              "onPassNext": "N_LEAVE_OVERFLOW_KNOWN",
              "onFailNext": "N_LEAVE_OVERFLOW_UNKNOWN"
            }
          ]
        },
        {
          "id": "N_SPHERE_A",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Up close, the sphere isn\u2019t reflective so much as decisive.\nMost angles: matte insulation, scuffed like it\u2019s been cleaned too carefully.\nOne angle: your own silhouette returns with a half-second delay, as if the surface is waiting for permission. Your throat tightens and you file it as particulate interference.",
          "next": "PC_SPHERE"
        },
        {
          "id": "PC_SPHERE",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_ASK_LABELS",
              "text": "ask: Any labels?",
              "next": "N_SPHERE_LABELS"
            },
            {
              "id": "C_LEAVE_BACK",
              "text": "leave: back",
              "next": "PC_HUB"
            }
          ]
        },
        {
          "id": "N_SPHERE_LABELS",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "A metal placard is bolted on crooked.\nIt reads: CONTAINMENT SPHERE \u2014 DO NOT POLISH.\nSomeone underlined DO NOT twice, in marker that dried into the grain like it wanted to be permanent.",
          "next": "PC_HUB"
        },
        {
          "id": "N_STATUS_A",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "A cluster of indicator lamps and a numeric display sits on a pedestal, like it expects a person to stand here and feel responsible.\nLabels are hand-applied: some typed, some stamped, some written in pencil and then \u201cmade official\u201d with clear tape.\nThe readouts don\u2019t say ON or OFF. They say:\nROTATION: CONTINUOUS\nALIGNMENT: UNCONFIRMED / LAST: [blank]\nLOAD: STABLE (PER AGREEMENT)",
          "next": "PC_STATUS"
        },
        {
          "id": "PC_STATUS",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_ASK_AGREEMENT",
              "text": "ask: Per whose agreement?",
              "next": "N_STATUS_AGREEMENT"
            },
            {
              "id": "C_ASK_APPENDIX",
              "text": "ask: Interpret \u201cREFER TO APPENDIX D.\u201d",
              "checks": [
                {
                  "type": "skill",
                  "skill": "compliance",
                  "dc": 12
                }
              ],
              "onPassNext": "N_STATUS_APPENDIX_PASS",
              "onFailNext": "N_STATUS_APPENDIX_FAIL"
            },
            {
              "id": "C_LEAVE_BACK",
              "text": "leave: back",
              "next": "PC_HUB"
            }
          ]
        },
        {
          "id": "N_STATUS_AGREEMENT",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "There\u2019s no answer\u2014only the quiet insistence of the display.\nA tiny sticker beneath it says: IF QUESTIONED, REFER TO APPENDIX D.\nAppendix D is not present.",
          "next": "PC_HUB"
        },
        {
          "id": "N_STATUS_APPENDIX_PASS",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Appendix D is the kind of addendum that exists to make responsibility transferrable.\nIt usually defines witness thresholds, recording requirements, and what counts as \u201cpresence\u201d when someone later asks why a procedure happened without a second set of eyes.\nHere, it\u2019s referenced like a shield and missing like a confession.",
          "next": "PC_HUB"
        },
        {
          "id": "N_STATUS_APPENDIX_FAIL",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You can\u2019t reconstruct it from the labels alone.\nThe reference is doing its job: it points somewhere that can\u2019t contradict the panel today, but can contradict you later.",
          "next": "PC_HUB"
        },
        {
          "id": "N_PANEL_A",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The scan panel is mounted at waist height, clean enough to imply routine use.\nA camera. A palm reader. A small microphone grille.\nAbove it: WITNESS REQUIREMENT ZONE \u2014 TWO-PERSON PRESENCE BEYOND THIS LINE.\nThe line is the witness-marker tape. It encloses the panel and a narrow path toward the sphere, like a funnel.",
          "next": "PC_PANEL"
        },
        {
          "id": "PC_PANEL",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_PANEL",
              "text": "use: Interface scan panel",
              "checks": [
                {
                  "type": "flag",
                  "key": "party.secondPresenceDetected",
                  "value": true
                }
              ],
              "onPassNext": "N_PANEL_USE_PASS",
              "onFailNext": "N_PANEL_USE_FAIL"
            },
            {
              "id": "C_ASK_CONFIRM_BOUNDARY",
              "text": "ask: Confirm the witness zone boundary (point-of-no-return).",
              "conditions": [
                {
                  "key": "knowledge.witnessZoneKnown",
                  "op": "!=",
                  "value": true
                }
              ],
              "effects": [
                {
                  "key": "knowledge.witnessZoneKnown",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "N_PANEL_ACK"
            },
            {
              "id": "C_LEAVE_BACK",
              "text": "leave: back",
              "next": "PC_HUB"
            }
          ]
        },
        {
          "id": "N_PANEL_USE_FAIL",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The panel wakes with a soft tone that tries to sound neutral.\nPRESENCE CHECK: INSUFFICIENT.\nThen, defensively: THIS IS NOT A DENIAL. THIS IS A REQUIREMENT.\nSECOND PRESENCE NOT DETECTED. DO NOT PROCEED ALONE.\nA final line appears, almost petty: COMPLIANCE LIKES CONSISTENCY.",
          "next": "PC_PANEL_AFTER_FAIL"
        },
        {
          "id": "PC_PANEL_AFTER_FAIL",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_ASK_CONFIRM_BOUNDARY",
              "text": "ask: Confirm the witness zone boundary (point-of-no-return).",
              "conditions": [
                {
                  "key": "knowledge.witnessZoneKnown",
                  "op": "!=",
                  "value": true
                }
              ],
              "effects": [
                {
                  "key": "knowledge.witnessZoneKnown",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "N_PANEL_ACK"
            },
            {
              "id": "C_LOOK_ESTOP",
              "text": "look: Emergency stop",
              "next": "N_ESTOP_A"
            },
            {
              "id": "C_LEAVE_BACK",
              "text": "leave: back",
              "next": "PC_HUB"
            }
          ]
        },
        {
          "id": "N_PANEL_USE_PASS",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The panel tone shifts\u2014less defensive, more official.\nPRESENCE CHECK: SATISFIED.\nA prompt waits for you to make it a record.\nThe tape line doesn\u2019t move. The wording does: it stops being equipment and starts being testimony.",
          "next": "PC_PANEL_AFTER_PASS"
        },
        {
          "id": "PC_PANEL_AFTER_PASS",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_ASK_CONFIRM_BOUNDARY",
              "text": "ask: Confirm the witness zone boundary (point-of-no-return).",
              "conditions": [
                {
                  "key": "knowledge.witnessZoneKnown",
                  "op": "!=",
                  "value": true
                }
              ],
              "effects": [
                {
                  "key": "knowledge.witnessZoneKnown",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "N_PANEL_ACK"
            },
            {
              "id": "C_LEAVE_BACK",
              "text": "leave: back",
              "next": "PC_HUB"
            }
          ]
        },
        {
          "id": "N_PANEL_ACK",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You mark it mentally the way you\u2019d mark a live bus bar: not dramatic, just absolute.\nWhatever \u201cshutdown\u201d means here, it starts when you step over the witness line and let the panel record you doing it.\nYou now know where the facility stops being equipment and starts being testimony.",
          "next": "PC_HUB"
        },
        {
          "id": "N_ESTOP_A",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The emergency stop is a red mushroom button under a flip cover\u2014the kind you can slap without thinking, if you\u2019re willing to spend a year defending the slap.\nA tag dangles: SEALED \u2014 USE REQUIRES POST-ACTION AUTHORIZATION.\nA placard answers like it\u2019s been in court before:\nEMERGENCY STOP INITIATES CONTROLLED DECELERATION SEQUENCE WHERE PRACTICABLE.\nThen, smaller: PRACTICABLE IS DETERMINED RETROACTIVELY.",
          "next": "PC_ESTOP"
        },
        {
          "id": "PC_ESTOP",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_ESTOP",
              "text": "use: Emergency stop",
              "next": "N_ESTOP_USE"
            },
            {
              "id": "C_LOOK_PANEL",
              "text": "look: Interface scan panel",
              "next": "N_PANEL_A"
            },
            {
              "id": "C_LEAVE_BACK",
              "text": "leave: back",
              "next": "PC_HUB"
            }
          ]
        },
        {
          "id": "N_ESTOP_USE",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You lift the cover. The hinge squeaks in a way that feels like a witness.\nUnder the button, another label: DO NOT USE TO SIMPLIFY PROCEDURE.\nThat one is new.\nYou don\u2019t press it. Even standing here, you can already hear the memo being drafted about what you \u201cintended.\u201d",
          "next": "PC_HUB"
        },
        {
          "id": "N_LEAVE_OBS_UNKNOWN",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You take one last look across the floor\u2014the sphere, the lights, the tape that pretends it\u2019s just tape.\nThen you head for the stairs down to the observation deck. The hum follows you, consistent as a policy.",
          "next": "END_OBS_UNKNOWN"
        },
        {
          "id": "END_OBS_UNKNOWN",
          "type": "end"
        },
        {
          "id": "N_LEAVE_OBS_KNOWN",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You take one last look at the witness perimeter, like it might move when you aren\u2019t watching. It doesn\u2019t.\nYou head for the stairs down to the observation deck. The hum follows you, consistent as a policy.",
          "next": "END_OBS_KNOWN"
        },
        {
          "id": "END_OBS_KNOWN",
          "type": "end",
          "outcomeId": "witness_zone_identified"
        },
        {
          "id": "N_LEAVE_OVERFLOW_UNKNOWN",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You angle back toward the overflow intake concourse.\nThe chamber stays behind you, quietly maintaining its version of \u201cnormal.\u201d",
          "next": "END_OVERFLOW_UNKNOWN"
        },
        {
          "id": "END_OVERFLOW_UNKNOWN",
          "type": "end"
        },
        {
          "id": "N_LEAVE_OVERFLOW_KNOWN",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You angle back toward the overflow intake concourse with the tape line fixed in your mind as a procedural edge.\nThe chamber stays behind you, quietly maintaining its version of \u201cnormal.\u201d",
          "next": "END_OVERFLOW_KNOWN"
        },
        {
          "id": "END_OVERFLOW_KNOWN",
          "type": "end",
          "outcomeId": "witness_zone_identified"
        }
      ]
    }
  ]
}
