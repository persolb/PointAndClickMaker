{
  "dialogueGraphs": [
    {
      "id": "SCN_074_TERMINAL_SHUTDOWN",
      "sceneId": "SCN-074",
      "startNodeId": "N_START",
      "nodes": [
        {
          "id": "N_START",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "SPINDLE Chamber Floor. The containment sphere fills the center of the room like an oversized insulator\u2014until it doesn\u2019t.\nA status indicator cluster ticks through load, interlocks, and an authority field you didn\u2019t enter.\nThe interface scan panel waits with the patience of a copier.",
          "next": "N_OPS_RULES"
        },
        {
          "id": "N_OPS_RULES",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Hold up. (pause) Watch your words. (pause) No emergency. (pause) No it's trying. (pause) No still. (pause) Print the header. (pause) Then act. (pause) I like my job.",
          "next": "MENU_MAIN"
        },
        {
          "id": "MENU_MAIN",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_ASK_STATUS",
              "text": "ask: Status?",
              "next": "N_OPS_STATUS"
            },
            {
              "id": "C_USE_SCAN_PANEL",
              "text": "use: Open the interface scan panel notice banner.",
              "next": "N_PANEL_BANNER"
            },
            {
              "id": "C_ASK_REF_NUMBER",
              "text": "ask: Read back the reference number.",
              "next": "N_PLAYER_REF_PROMPT"
            },
            {
              "id": "C_ASK_PENDING_DOCS",
              "text": "ask: What documentation is \u201cpending\u201d?",
              "next": "N_PLAYER_PENDING_PROMPT"
            },
            {
              "id": "C_PERSUADE_MTA_DETAIL",
              "text": "persuade: Request a minimal compliance path that permits a logged shutdown.",
              "checks": [
                {
                  "type": "skill",
                  "skill": "COMPLIANCE",
                  "dc": 12
                }
              ],
              "onPassNext": "N_MTA_COMPLIANCE_PATH_PASS",
              "onFailNext": "N_MTA_COMPLIANCE_PATH_FAIL"
            },
            {
              "id": "C_TALK_OPS_DEFENSIBLE",
              "text": "talk: Ops, what\u2019s the defensible move?",
              "next": "N_OPS_DEFENSIBLE"
            },
            {
              "id": "C_TALK_LEGAL",
              "text": "talk: Legal. I need wording.",
              "next": "N_LEGAL_CONNECT"
            },
            {
              "id": "C_USE_PRINT_NOTICE",
              "text": "use: Print the notice screen.",
              "next": "N_PRINT_NOTICE"
            },
            {
              "id": "C_LOOK_SPHERE",
              "text": "look: Containment sphere surface.",
              "next": "N_LOOK_SPHERE"
            },
            {
              "id": "C_LOOK_INDICATORS",
              "text": "look: Status indicator cluster.",
              "next": "N_LOOK_INDICATORS"
            },
            {
              "id": "C_LEAVE_OBS_DECK",
              "text": "leave: Step back toward the observation deck stairs.",
              "next": "N_LEAVE_OBS"
            },
            {
              "id": "C_USE_SHUTDOWN_MENU",
              "text": "use: Open the official shutdown sequence menu.",
              "next": "N_SHUTDOWN_INTRO"
            }
          ]
        },
        {
          "id": "N_OPS_STATUS",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Local motion: permissive. (pause) Proximity is clear. (pause)\nNon-local shows a hold. (pause) Not my category. (pause)\nLogs are live. (pause) Don't make me chase timestamps.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_PANEL_BANNER",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "On the interface scan panel: a notice banner, formatted like a utility bill that learned to threaten people.",
          "next": "N_MTA_NOTICE"
        },
        {
          "id": "N_MTA_NOTICE",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "NOTICE \u2014 NON-LOCAL COMPLIANCE CONDITION. (pause)\nSUBJECT NODE: SOL\u2011EARTH\u2011LOCAL. (pause)\nACTION: HOLD STATE. (pause)\nPENDING DOCUMENTATION. (pause)\nMANAGING AUTHORITY: METASTABLE TRANSFER AUTHORITY. (pause)\n(MTA). (pause)\nREFERENCE: [scrolling reference string].",
          "next": "N_OPS_ATTRIBUTION_PUSH"
        },
        {
          "id": "N_OPS_ATTRIBUTION_PUSH",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "We can\u2019t clear it locally. (pause) So we document. (pause) Read the reference number back. (pause) Then print it. (pause) I want attribution.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_PLAYER_REF_PROMPT",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Reference number.",
          "next": "N_MTA_REF_READBACK"
        },
        {
          "id": "N_MTA_REF_READBACK",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "MTA_NOTICE_REF: [full string]. (pause) Submission log: [log string]. (pause) Queue position: [value]. (pause) Processing window: active.",
          "next": "N_OPS_REF_INSTRUCTIONS"
        },
        {
          "id": "N_OPS_REF_INSTRUCTIONS",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Good. Don\u2019t summarize. Attach the original. (pause) Print it from the tray. (pause) Screenshots turn into debates.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_PLAYER_PENDING_PROMPT",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Pending what.",
          "next": "N_MTA_PENDING_DOCS"
        },
        {
          "id": "N_MTA_PENDING_DOCS",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "Three things. (pause) Proof: authorized standing for the transition. (pause) Proof: SOL\u2011EARTH\u2011LOCAL fits a service class now. (pause) Proof: operator-of-record is at the endpoint.",
          "next": "N_PLAYER_ONSITE_CLAIM"
        },
        {
          "id": "N_PLAYER_ONSITE_CLAIM",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "I\u2019m on-site.",
          "next": "N_MTA_ONSITE_ACK"
        },
        {
          "id": "N_MTA_ONSITE_ACK",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "On-site noted\u2014as a physical claim.\nStanding\u2019s still pending.",
          "next": "N_OPS_PERSONALITY_NOTE"
        },
        {
          "id": "N_OPS_PERSONALITY_NOTE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "They heard you. (pause) They're still sitting on 'standing.' (pause) That's how they work.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_MTA_COMPLIANCE_PATH_PASS",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "There\u2019s a minimal path. (pause)\nReason phrase on record. (pause)\nAffirm continuous logging. (pause)\nOperator-of-record physically present. (pause)\nSubmit under retirement processing. (pause)\nLeave cause out. (pause)\nQueue position maintained. (pause)\nProcessing window active.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_MTA_COMPLIANCE_PATH_FAIL",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "Rejected. (pause) Hold state blocks state transitions. (pause) Shutdown counts. (pause) Standing pending. (pause) Service class pending. (pause) Queue position assigned.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_OPS_DEFENSIBLE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Make the next step look routine. (pause)\nUse the official sequence. (pause)\nKeep logging. Print before and after. (pause)\nHit the big red button. (pause)\nYou just signed up to be the author.",
          "next": "N_PLAYER_AND_HOLD"
        },
        {
          "id": "N_PLAYER_AND_HOLD",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "And the hold?",
          "next": "N_OPS_HOLD_REALITY"
        },
        {
          "id": "N_OPS_HOLD_REALITY",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "We don\u2019t clear holds. (pause) We document around them. (pause) Until someone upstream relents. (pause) Or you collapse routes. (pause) Until the hold is basically irrelevant. (pause) That didn\u2019t come from me.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LEGAL_CONNECT",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "A second line clicks in\u2014too clean for this building.",
          "next": "N_LEGAL_FRAMING"
        },
        {
          "id": "N_LEGAL_FRAMING",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Recorded line. (pause) Say what you\u2019re doing before you do it\u2014(pause) otherwise someone else will write the description later (pause) and you won\u2019t like their version.",
          "next": "N_PLAYER_SHUTTING_DOWN"
        },
        {
          "id": "N_PLAYER_SHUTTING_DOWN",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "I\u2019m shutting it down.",
          "next": "N_LEGAL_DEFINITIONS"
        },
        {
          "id": "N_LEGAL_DEFINITIONS",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Then you\u2019re \u201cexecuting a retirement sequence\u201d (pause) \u201cas a safety containment measure,\u201d (pause) pursuant to the closure evidence packet. (pause)\nDon\u2019t say \u201cresponding to an anomaly.\u201d (pause)\nDrop \u201cstill operating.\u201d (pause) \u201cStill\u201d reads like intent. (pause) Intent becomes governance.",
          "next": "N_PLAYER_REASON_PHRASE_REQUEST"
        },
        {
          "id": "N_PLAYER_REASON_PHRASE_REQUEST",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Give me a reason phrase.",
          "next": "N_LEGAL_REASON_PHRASE"
        },
        {
          "id": "N_LEGAL_REASON_PHRASE",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Initiating terminal shutdown per retirement checklist (pause)\nas risk-limiting containment; (pause)\nmaintaining interlocks and continuous logging; (pause)\noperator present on-site. (pause)\nYes, it\u2019s going to irritate people. (pause)\nThat\u2019s fine.",
          "next": "MENU_LEGAL"
        },
        {
          "id": "MENU_LEGAL",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_SHOW_READ_PHRASE",
              "text": "show: Read that reason phrase into the log.",
              "conditions": [
                {
                  "key": "act3.closurePathMemoDrafted",
                  "op": "==",
                  "value": true
                },
                {
                  "key": "act3.reasonPhraseLogged",
                  "op": "!=",
                  "value": true
                }
              ],
              "effects": [
                {
                  "key": "act3.reasonPhraseLogged",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "N_PLAYER_READS_PHRASE"
            },
            {
              "id": "C_ASK_HOLD_LANGUAGE",
              "text": "ask: Any language for the non-local hold?",
              "next": "N_LEGAL_HOLD_LANGUAGE"
            },
            {
              "id": "C_LEAVE_BACK_TO_PANEL",
              "text": "leave: Back to the panel.",
              "next": "MENU_MAIN"
            }
          ]
        },
        {
          "id": "N_PLAYER_READS_PHRASE",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Initiating terminal shutdown per retirement checklist as risk-limiting containment; maintaining interlocks and continuous logging; operator present on-site.",
          "next": "N_OPS_ATTRIBUTABLE_THANKS"
        },
        {
          "id": "N_OPS_ATTRIBUTABLE_THANKS",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Good. That's attributable. (pause) When it echoes back, print it. (pause) People rewrite history later.",
          "next": "N_LEGAL_ONE_SENTENCE"
        },
        {
          "id": "N_LEGAL_ONE_SENTENCE",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "And stop at one sentence. (pause) Add a second. (pause) It turns into a narrative.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LEGAL_HOLD_LANGUAGE",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Describe it like this: (pause)\n\u201cNon-local compliance hold notice received.\u201d (pause)\n\u201cReference logged.\u201d (pause)\n\u201cShutdown executed per retirement checklist.\u201d (pause)\n\u201cRisk-limiting containment.\u201d (pause)\n\u201cContinuous logging.\u201d (pause)\nDon\u2019t add why. (pause)\nDon\u2019t add motive. (pause)\nJust receipt and procedure.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_PRINT_NOTICE",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The printer in the wall stutters awake like it resents being included.\nA banner prints with the notice header and the reference string, crisp enough to be weaponized.",
          "next": "N_OPS_STAPLE_IT"
        },
        {
          "id": "N_OPS_STAPLE_IT",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Staple it to the front. (pause) Proof you were there. (pause) When it didn't fix itself.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LOOK_SPHERE",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The sphere\u2019s surface is mostly matte\u2014until a thin band goes smooth and reflective, catching angles the room doesn\u2019t offer.\nIt doesn\u2019t brighten. It clarifies.",
          "next": "N_OPS_VISUAL_CHANGE"
        },
        {
          "id": "N_OPS_VISUAL_CHANGE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Log visual condition change. (pause) Note time and distance. (pause) Say you stayed outside the barrier stripe.",
          "next": "N_PLAYER_OUTSIDE_STRIPE"
        },
        {
          "id": "N_PLAYER_OUTSIDE_STRIPE",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Outside the stripe.",
          "next": "N_OPS_BADGE_LINE"
        },
        {
          "id": "N_OPS_BADGE_LINE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Good. Don\u0019t change that wording.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LOOK_INDICATORS",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Indicators: ROTATION FRAMES \u2014 SYNCH TIGHT.\nINTERLOCKS \u2014 ARMED.\nAUTHORITY \u2014 NON-LOCAL.\nA small light labeled RETIREMENT CHECKLIST blinks like it\u2019s asking permission.",
          "next": "N_OPS_ARMED_WORD"
        },
        {
          "id": "N_OPS_ARMED_WORD",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Armed is a bad label. (pause) Still, the panel prints it. (pause) We get judged on it.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LEAVE_OBS",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You step toward the stairs. The chamber doesn\u2019t follow you.\nThe panel continues to wait, as if you only paused a sentence.",
          "next": "N_OPS_TIMESTAMP_WARNING"
        },
        {
          "id": "N_OPS_TIMESTAMP_WARNING",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Walk away if you need to. (pause) Timestamp keeps running. (pause) Come back when you're ready. (pause) Do it on the record.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_SHUTDOWN_INTRO",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The interface scan panel offers the official shutdown sequence: staged steps, each with a place for a reason phrase and a signature block you can\u2019t sign digitally.",
          "next": "MENU_SHUTDOWN"
        },
        {
          "id": "MENU_SHUTDOWN",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_EXECUTE_LOGGED",
              "text": "use: Execute official terminal shutdown sequence (use logged reason phrase).",
              "conditions": [
                {
                  "key": "act3.reasonPhraseLogged",
                  "op": "==",
                  "value": true
                }
              ],
              "next": "N_RUN_SEQUENCE_START"
            },
            {
              "id": "C_USE_EXECUTE_UNLOGGED",
              "text": "use: Execute official terminal shutdown sequence.",
              "conditions": [
                {
                  "key": "act3.reasonPhraseLogged",
                  "op": "!=",
                  "value": true
                }
              ],
              "next": "N_RUN_SEQUENCE_START_UNLOGGED"
            },
            {
              "id": "C_USE_EMERGENCY_STOP",
              "text": "use: Press Emergency Stop.",
              "next": "N_EMERGENCY_STOP_PLAYER"
            },
            {
              "id": "C_LEAVE_LAST_PASS",
              "text": "leave: Do one last pass of the hotspots.",
              "next": "MENU_MAIN"
            }
          ]
        },
        {
          "id": "N_EMERGENCY_STOP_PLAYER",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Emergency stop.",
          "next": "N_OPS_DONT_CALL_IT"
        },
        {
          "id": "N_OPS_DONT_CALL_IT",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Don\u2019t write \u201cemergency stop\u201d in the log. (pause) Write \u201cLocal motion control trip\u201d. (pause) Add a reason phrase and timestamp. (pause) That entry starts a meeting. (pause) Make it defensible.",
          "next": "N_MTA_LOCAL_INTERRUPTION"
        },
        {
          "id": "N_MTA_LOCAL_INTERRUPTION",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "Local interruption acknowledged. (pause) Hold state remains. (pause) Standing evaluation pending. (pause) Processing window active.",
          "next": "N_LEGAL_EMERGENCY_LANGUAGE"
        },
        {
          "id": "N_LEGAL_EMERGENCY_LANGUAGE",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "If you\u2019re going through, call it. (pause) Risk-limiting interruption. (pause) Pending retirement processing. (pause) Keep \u201cpanic\u201d and \u201creaction\u201d out. (pause) Those words stick.",
          "next": "N_NARRATOR_HAND_HOVER"
        },
        {
          "id": "N_NARRATOR_HAND_HOVER",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Your hand hovers near the button. It is large enough to be a confession.",
          "next": "N_EMERGENCY_RETURN"
        },
        {
          "id": "N_EMERGENCY_RETURN",
          "type": "redirect",
          "target": "MENU_SHUTDOWN"
        },
        {
          "id": "N_RUN_SEQUENCE_START",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Run the sequence.",
          "next": "N_OPS_READ_ONCE_MORE"
        },
        {
          "id": "N_OPS_READ_ONCE_MORE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Read the reason phrase again. (pause) Then run it. (pause) No improvising halfway through.",
          "next": "N_PLAYER_RECITES_LOGGED"
        },
        {
          "id": "N_PLAYER_RECITES_LOGGED",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Initiating terminal shutdown per retirement checklist as risk-limiting containment; maintaining interlocks and continuous logging; operator present on-site.",
          "next": "N_LEGAL_ACCEPTABLE_BETTER"
        },
        {
          "id": "N_RUN_SEQUENCE_START_UNLOGGED",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Run the sequence.",
          "next": "N_OPS_NO_IMPROV"
        },
        {
          "id": "N_OPS_NO_IMPROV",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Do it in the order the console expects. (pause) Give a reason phrase when it asks. (pause) Add a timestamp when it asks.",
          "next": "N_PLAYER_RECITES_MINIMAL"
        },
        {
          "id": "N_PLAYER_RECITES_MINIMAL",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Terminal shutdown per checklist. Operator on-site. Logging maintained.",
          "next": "N_LEGAL_ACCEPTABLE_BETTER"
        },
        {
          "id": "N_LEGAL_ACCEPTABLE_BETTER",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Acceptable. Use the first one. (pause) It\u2019s harder to twist later.",
          "next": "N_MTA_CONFLICT_NOTED"
        },
        {
          "id": "N_MTA_CONFLICT_NOTED",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "State transition request received. Hold state conflict noted. (pause) Processing window active. Queue position maintained.",
          "next": "N_NARRATOR_ROUTES_COLLAPSE"
        },
        {
          "id": "N_NARRATOR_ROUTES_COLLAPSE",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You confirm. The panel accepts it the way a form accepts ink: without agreement, with permanence.\nThe status indicator cluster steps down in clean increments.\nRoutes collapse\u2014not dramatically, just decisively\u2014like doors closing in adjacent rooms you can\u2019t see.",
          "next": "N_OPS_PRINT_POSTSTATE"
        },
        {
          "id": "N_OPS_PRINT_POSTSTATE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Alright. (pause) Fewer options now. (pause) Print the post-state, staple it. (pause) Stay where you are. (pause) Presence goes in the record.",
          "next": "N_END_SHUTDOWN"
        },
        {
          "id": "N_END_SHUTDOWN",
          "type": "end",
          "outcomeId": "execute_terminal_shutdown",
          "effects": [
            {
              "key": "act3.endgameExecuted",
              "action": "set",
              "value": true
            },
            {
              "key": "act3.outcome",
              "action": "set",
              "value": "ROUTES_COLLAPSED"
            }
          ]
        }
      ]
    }
  ]
}