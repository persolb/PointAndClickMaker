{
  "dialogueGraphs": [
    {
      "id": "AMR_TRIAGE_READER",
      "sceneId": "SCN-055",
      "startNodeId": "NARR_START",
      "nodes": [
        {
          "id": "NARR_START",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "conditions": [
            {
              "key": "act2.amrIssued",
              "op": "==",
              "value": false
            },
            {
              "key": "act2.legacyMetadataSeen",
              "op": "==",
              "value": true
            }
          ],
          "text": "The AMR registry reader sits under a hooded task light, as if it\u2019s being interrogated. (pause) A slot labeled PRINTOUT is jammed with old perforated stock. (pause) The screen displays: SPONSOR REQUIRED.",
          "next": "TRIAGE_INTRO"
        },
        {
          "id": "TRIAGE_INTRO",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "You're staring at it like it's gonna give. (pause)\nIt won't. (pause)\nThree boxes. Sponsor. (pause)\nScope. (pause)\nAcceptable failure mode. (pause)\nAnything else is\u2014 (cuts off) an argument.",
          "next": "MENU_MAIN"
        },
        {
          "id": "MENU_MAIN",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "CH_AMR",
              "text": "ask: \u201cAMR?\u201d",
              "next": "TRIAGE_EXPLAIN_AMR"
            },
            {
              "id": "CH_SPONSOR",
              "text": "ask: \u201cSponsor. You?\u201d",
              "next": "TRIAGE_EXPLAIN_SPONSOR"
            },
            {
              "id": "CH_SHOW",
              "text": "show: \u201cI\u2019ve got legacy metadata on the endpoint.\u201d",
              "conditions": [
                {
                  "key": "act2.legacyMetadataSeen",
                  "op": "==",
                  "value": true
                }
              ],
              "next": "TRIAGE_READ_METADATA"
            },
            {
              "id": "CH_FAILURE",
              "text": "ask: \u201cAcceptable failure mode?\u201d",
              "next": "TRIAGE_EXPLAIN_FAILURE"
            },
            {
              "id": "CH_SCOPE",
              "text": "ask: \u201cScope options?\u201d",
              "next": "TRIAGE_SCOPE_OPTIONS"
            },
            {
              "id": "CH_PERSUADE",
              "text": "persuade: \u201cThis is OLEA closure work. I need an entry today.\u201d",
              "checks": [
                {
                  "type": "skill",
                  "skill": "BUREAUCRACY",
                  "dc": 12
                }
              ],
              "onPassNext": "TRIAGE_PERSUADE_PASS",
              "onFailNext": "TRIAGE_PERSUADE_FAIL"
            },
            {
              "id": "CH_THREAT",
              "text": "threaten: \u201cFine. I\u2019ll log it as open anomaly and escalate.\u201d",
              "next": "TRIAGE_THREAT_RESP"
            },
            {
              "id": "CH_LEAVE",
              "text": "leave: \u201cI\u2019ll come back.\u201d",
              "next": "LEAVE_END"
            }
          ]
        },
        {
          "id": "TRIAGE_EXPLAIN_AMR",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Attached Mass Registry. (pause)\nYeah, it's a paperwork hack. (pause)\nGets it filed. No new bucket. (pause)\n\"Attached\": under an existing endpoint record. (pause)\n\"Mass\"\u2014we don't fight that word. (pause)\n\"Registry\": in the system. I'm stuck with it. (pause)\nSo. Scope. (pause)\nSponsor. (pause)\nFailure mode.",
          "next": "MENU_MAIN"
        },
        {
          "id": "TRIAGE_EXPLAIN_SPONSOR",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "If I sponsor it it stays maintenance-class. (pause)\nMy name goes on the file. (pause)\nI'll do it if it's inside scope. (pause)\nI'm not signing a mystery. (pause)\nGive me one sentence I can live with. (pause)\nSomething that doesn't drag me into a hearing. (pause)\nEndpoint or failure mode. Pick.",
          "next": "MENU_MAIN"
        },
        {
          "id": "TRIAGE_READ_METADATA",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Alright. Show me. (pause)\n(reads; lips moving) ...Okay. Yeah, legacy helps. (pause)\nThere's already a record to hang this on. (pause)\nAnd here? Paper's the only thing that counts. (pause)\nStill need the line though. (pause)\nWhat do you want the AMR to say? (pause)\nGive me an acceptable failure mode. (pause)\nKeep it boring. Keep it stable.",
          "next": "MENU_MAIN"
        },
        {
          "id": "TRIAGE_EXPLAIN_FAILURE",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "\"Acceptable\" means I sign off on the fix. (pause)\nThat's all it means. (pause)\nPick the label. (pause)\nMisclassification of endpoint. (pause)\nRouting error. (pause)\nDegraded seal geometry. (pause)\nSensor inversion. (pause)\nReflective behavior. (pause)\nAnd don't type \"reflection.\" (pause)\nLegal goes sideways on that word. (pause)\nWhat are you putting in writing?",
          "next": "MENU_MAIN"
        },
        {
          "id": "TRIAGE_THREAT_RESP",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Go ahead. Open anomaly. (pause)\nType \"unknown\" once. It snowballs. (pause)\nThen Assurance walks in. (pause)\nThey'll ask for a comparison framework. (pause)\nNext week you return with a binder. (pause)\nAnd a headache. (pause)\nI'm trying to keep this boring. (pause)\nScope. (pause)\nSponsor. (pause)\nFailure mode.",
          "next": "MENU_MAIN"
        },
        {
          "id": "TRIAGE_PERSUADE_PASS",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "I don't care if you're closing the moon (pause)\nby end of quarter. (pause)\nOLEA closure packets are just stacks of signatures. (pause)\nMine isn't going on a mess. (pause)\nI can cut an AMR tag (pause)\nand hand you a tool (pause)\nthat does one thing (pause)\nand doesn't look like permission. (pause)\nYou keep this inside Interconnection Maintenance. (pause)\nPick the failure mode. (pause)\nThen we move.",
          "next": "TRIAGE_SCOPE_OPTIONS"
        },
        {
          "id": "TRIAGE_PERSUADE_FAIL",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "A deadline isn't a failure mode. (pause)\nYou want my signature? (pause)\nGive me scope wording I can actually sign. (pause)\nOtherwise it lands on me. (pause)\nScope. Sponsor. Failure mode. Choose.",
          "next": "MENU_MAIN"
        },
        {
          "id": "TRIAGE_SCOPE_OPTIONS",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Scope keeps this from reading like tampering. (pause)\nIn the log. (pause)\nWith the tag you're cleared to: identify. (pause)\nAttach. (pause)\nSeal. (pause)\nDocument. (pause)\nDone. (pause)\nNo testing. (pause)\nNo probing. (pause)\nNo exploring. (pause)\n(flat) (pause)\nDon't. (pause)\nIf you need a tool, (pause)\nit's a seal tool. (pause)\nNothing that looks like a theory. (pause)\nSo. (pause)\nwhat are we calling it?",
          "next": "FRAMING_MENU"
        },
        {
          "id": "FRAMING_MENU",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "CH_ROUTING",
              "text": "ask: \u201cCall it a routing error at an existing endpoint.\u201d",
              "next": "TRIAGE_ROUTING_OK"
            },
            {
              "id": "CH_MISCLASS",
              "text": "ask: \u201cCall it misclassification. Existing endpoint, wrong label.\u201d",
              "next": "TRIAGE_MISCLASS_OK"
            },
            {
              "id": "CH_REFLECT",
              "text": "ask: \u201cUse the legacy phrase. \u2018Unexpected reflective behavior.\u2019\u201d",
              "next": "TRIAGE_REFLECT_OK"
            },
            {
              "id": "CH_BARGAIN",
              "text": "bargain: \u201cI\u2019ll keep it maintenance-class. You give me a tag, printout, and a tool.\u201d",
              "next": "TRIAGE_BARGAIN_RESP"
            },
            {
              "id": "CH_LEAVE2",
              "text": "leave: \u201cNot today.\u201d",
              "next": "LEAVE_END"
            }
          ]
        },
        {
          "id": "TRIAGE_BARGAIN_RESP",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Fine. (pause)\nMaintenance-class in your reports. (pause)\nDon't get cute with my tag. Watch verbs. (pause)\nWrite it clean. (pause)\nYou'll get the AMR entry. (pause)\nThe physical tag. (pause)\nThe printout. (pause)\nAnd one tool. One job. (pause)\nYou choose the sentence. (pause)\nI'm not choosing it for you.",
          "next": "FRAMING_MENU"
        },
        {
          "id": "TRIAGE_ROUTING_OK",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Routing error works. (pause)\nEverybody hates it. (pause)\nSo nobody fights the wording. (pause)\nBlame stays in pipes and file. (pause)\nI'll sponsor but I'm adding a line. (pause)\n\"No personnel transfer implied.\" (pause)\nYeah I know. (pause)\nIt's there so nobody writes worse later. (pause)\nYou good? (pause)\nThen we issue.",
          "next": "CONFIRM_ROUTING"
        },
        {
          "id": "CONFIRM_ROUTING",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "CH_CONFIRM",
              "text": "talk: \u201cAdd your wording. Issue it.\u201d",
              "effects": [
                {
                  "key": "act2.amrFraming",
                  "action": "set",
                  "value": "routing_error"
                }
              ],
              "next": "NARR_ISSUE_1"
            }
          ]
        },
        {
          "id": "TRIAGE_MISCLASS_OK",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Misclassification. (pause)\nYeah. I can sign that. (pause)\nEndpoint exists, label's wrong. (pause)\nThat stays upstream. (pause)\nI'm adding: \"Corrective maintenance limited to seal.\" (pause)\nSeal and registry attachment only. (pause)\nAnything past that\u2014that's you. (pause)\nAgree? (pause)\nThen we issue.",
          "next": "CONFIRM_MISCLASS"
        },
        {
          "id": "CONFIRM_MISCLASS",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "CH_CONFIRM",
              "text": "talk: \u201cAdd your wording. Issue it.\u201d",
              "effects": [
                {
                  "key": "act2.amrFraming",
                  "action": "set",
                  "value": "misclassification"
                }
              ],
              "next": "NARR_ISSUE_1"
            }
          ]
        },
        {
          "id": "TRIAGE_REFLECT_OK",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Okay. Legacy phrase. (pause)\nIt got through one legal cycle. (pause)\nI put \"reflective behavior\" in the line. (pause)\nthen I tack on \"non-reflection.\" (pause)\nYeah. It\u2019s stupid. (pause)\nIt survives review. (pause)\nYou stay scope-limited and we issue.",
          "next": "CONFIRM_REFLECT"
        },
        {
          "id": "CONFIRM_REFLECT",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "CH_CONFIRM",
              "text": "talk: \u201cAdd your wording. Issue it.\u201d",
              "effects": [
                {
                  "key": "act2.amrFraming",
                  "action": "set",
                  "value": "unexpected_reflective_behavior"
                }
              ],
              "next": "NARR_ISSUE_1"
            }
          ]
        },
        {
          "id": "NARR_ISSUE_1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The Maintainer keys in the entry with two fingers, (pause) like touching the wrong key could be construed as intent. (pause) The printer chatters and produces a single-page AMR printout (pause) with dense, aggressively boring language.",
          "next": "TRIAGE_HANDOVER_1"
        },
        {
          "id": "TRIAGE_HANDOVER_1",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Alright. It's attached to the endpoint record. (pause)\nTag\u2014don't lose it. (pause)\nYou ask for a replacement. (pause)\nIt turns into a duplicate. (pause)\nThen somebody starts counting. (pause)\nPrintout. Keep it dry. (pause)\nAnd\u2014 (rummages; irritated) here.",
          "next": "NARR_TOOL_1"
        },
        {
          "id": "NARR_TOOL_1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The Maintainer sets compact heavy tool on bench: seal punch, depth stop, serialized collar.",
          "next": "TRIAGE_TOOL_SCOPE"
        },
        {
          "id": "TRIAGE_TOOL_SCOPE",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "Scope-limited seal punch. (pause)\nOne mark. One depth. (pause)\nApproved material only. (pause)\nIt doesn't open anything. (pause)\nIt doesn't test anything. (pause)\nNobody gets to wave this around like permission. (pause)\nIf asked, this is a warranty boundary. (pause)\nThat's it.",
          "next": "NARR_RECEIVE_1"
        },
        {
          "id": "NARR_RECEIVE_1",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You receive an AMR tag, an AMR printout and a scope-limited seal punch tool. (pause) The registry reader returns to its idle screen (pause) satisfied in the way only a system can be (pause) when it has transferred responsibility.",
          "next": "TRIAGE_SIGNOFF"
        },
        {
          "id": "TRIAGE_SIGNOFF",
          "type": "npc_line",
          "speakerId": "TRIAGE_MAINT",
          "text": "That's your paper. (pause)\nThat's your scope. (pause)\nDo me a favor. (pause)\nDon't make me learn new nouns (pause)\nabout this place.",
          "next": "END_ISSUE_AMR"
        },
        {
          "id": "END_ISSUE_AMR",
          "type": "end",
          "outcomeId": "issue_amr_entry",
          "effects": [
            {
              "key": "act2.amrIssued",
              "action": "set",
              "value": true
            },
            {
              "key": "inventory.items",
              "action": "add",
              "value": "ITEM_AMR_TAG"
            },
            {
              "key": "inventory.items",
              "action": "add",
              "value": "ITEM_AMR_PRINTOUT"
            },
            {
              "key": "inventory.items",
              "action": "add",
              "value": "ITEM_SCOPE_TOOL_SEAL_PUNCH"
            },
            {
              "key": "objectives.obtainIWO",
              "action": "set",
              "value": true
            }
          ]
        },
        {
          "id": "LEAVE_END",
          "type": "end"
        }
      ]
    }
  ]
}