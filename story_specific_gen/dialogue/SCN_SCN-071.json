{
  "dialogueGraphs": [
    {
      "id": "SCN_074_TERMINAL_SHUTDOWN",
      "sceneId": "SCN-074",
      "startNodeId": "N_START",
      "nodes": [
        {
          "id": "N_START",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "SPINDLE Chamber Floor. The containment sphere fills the room\u2019s center like an oversized insulator\u2014until it doesn\u2019t. (pause) A status indicator cluster ticks through load and interlocks. (pause) Then it hits an authority field you didn\u2019t enter. (pause) The interface scan panel waits with the patience of a copier.",
          "next": "N_OPS_RULES"
        },
        {
          "id": "N_OPS_RULES",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Hold up. (pause) Watch your words. (pause) No \u001cemergency.\u001d (pause) No \u001cit\u0019s trying.\u001d (pause) Don\u0019t call it \u001cstill.\u001d (pause) Print the header. (pause) Then act. (pause) I\u0019m not taking the hit.",
          "next": "MENU_MAIN"
        },
        {
          "id": "MENU_MAIN",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_ASK_STATUS",
              "text": "ask: Status?",
              "next": "N_OPS_STATUS"
            },
            {
              "id": "C_USE_SCAN_PANEL",
              "text": "use: Open the interface scan panel notice banner.",
              "next": "N_PANEL_BANNER"
            },
            {
              "id": "C_ASK_REF_NUMBER",
              "text": "ask: Read back the reference number.",
              "next": "N_PLAYER_REF_PROMPT"
            },
            {
              "id": "C_ASK_PENDING_DOCS",
              "text": "ask: What documentation is \u201cpending\u201d?",
              "next": "N_PLAYER_PENDING_PROMPT"
            },
            {
              "id": "C_PERSUADE_MTA_DETAIL",
              "text": "persuade: Request a minimal compliance path that permits a logged shutdown.",
              "checks": [
                {
                  "type": "skill",
                  "skill": "COMPLIANCE",
                  "dc": 12
                }
              ],
              "onPassNext": "N_MTA_COMPLIANCE_PATH_PASS",
              "onFailNext": "N_MTA_COMPLIANCE_PATH_FAIL"
            },
            {
              "id": "C_TALK_OPS_DEFENSIBLE",
              "text": "talk: Ops, what\u2019s the defensible move?",
              "next": "N_OPS_DEFENSIBLE"
            },
            {
              "id": "C_TALK_LEGAL",
              "text": "talk: Legal. I need wording.",
              "next": "N_LEGAL_CONNECT"
            },
            {
              "id": "C_USE_PRINT_NOTICE",
              "text": "use: Print the notice screen.",
              "next": "N_PRINT_NOTICE"
            },
            {
              "id": "C_LOOK_SPHERE",
              "text": "look: Containment sphere surface.",
              "next": "N_LOOK_SPHERE"
            },
            {
              "id": "C_LOOK_INDICATORS",
              "text": "look: Status indicator cluster.",
              "next": "N_LOOK_INDICATORS"
            },
            {
              "id": "C_LEAVE_OBS_DECK",
              "text": "leave: Step back toward the observation deck stairs.",
              "next": "N_LEAVE_OBS"
            },
            {
              "id": "C_USE_SHUTDOWN_MENU",
              "text": "use: Open the official shutdown sequence menu.",
              "next": "N_SHUTDOWN_INTRO"
            }
          ]
        },
        {
          "id": "N_OPS_STATUS",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Local motion: permissive. (pause) Proximity\u0019s clear. (pause)\nNon-local shows a hold. (pause) Not my lane. (pause)\nLogs are live. (pause) Don\u0019t make me chase timestamps.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_PANEL_BANNER",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "On the scan panel: a banner, formatted like a utility bill that learned to threaten people.",
          "next": "N_MTA_NOTICE"
        },
        {
          "id": "N_MTA_NOTICE",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "NOTICE \u2014 NON-LOCAL COMPLIANCE CONDITION. (pause)\nSUBJECT NODE: SOL\u2011EARTH\u2011LOCAL. (pause)\nACTION: HOLD STATE. (pause)\nPENDING DOCUMENTATION. (pause)\nMANAGING AUTHORITY: METASTABLE TRANSFER AUTHORITY. (pause)\n(MTA). (pause)\nREFERENCE: [scrolling reference string].",
          "next": "N_OPS_ATTRIBUTION_PUSH"
        },
        {
          "id": "N_OPS_ATTRIBUTION_PUSH",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "We can\u0019t clear it locally. (pause) So we document. (pause) Read the reference number back. (pause) Then print it. (pause) I want attribution.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_PLAYER_REF_PROMPT",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Reference number.",
          "next": "N_MTA_REF_READBACK"
        },
        {
          "id": "N_MTA_REF_READBACK",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "MTA_NOTICE_REF: [full string]. (pause)\nSubmission log: [log string]. (pause)\nQueue position: [value]. (pause)\nProcessing window: active.",
          "next": "N_OPS_REF_INSTRUCTIONS"
        },
        {
          "id": "N_OPS_REF_INSTRUCTIONS",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Good. Don\u0019t summarize. Attach the original. (pause) Print it from the tray. (pause) Screenshots turn into debates.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_PLAYER_PENDING_PROMPT",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Pending what.",
          "next": "N_MTA_PENDING_DOCS"
        },
        {
          "id": "N_MTA_PENDING_DOCS",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "Three things. (pause)\nProof of authorized standing for the transition. (pause)\nProof SOL\u2011EARTH\u2011LOCAL fits a service class right now. (pause)\nProof the operator-of-record is at the endpoint.",
          "next": "N_PLAYER_ONSITE_CLAIM"
        },
        {
          "id": "N_PLAYER_ONSITE_CLAIM",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "I\u2019m on-site.",
          "next": "N_MTA_ONSITE_ACK"
        },
        {
          "id": "N_MTA_ONSITE_ACK",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "On-site\u2014fine. (pause) I\u2019ll log it as a physical claim. (pause) Standing\u2019s still pending.",
          "next": "N_OPS_PERSONALITY_NOTE"
        },
        {
          "id": "N_OPS_PERSONALITY_NOTE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "They heard you. (pause) They\u0019re still sitting on \u001cstanding.\u001d (pause) That\u0019s how they do it.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_MTA_COMPLIANCE_PATH_PASS",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "There\u2019s a minimal path. (pause)\nGet a reason phrase on the record. (pause)\nAffirm continuous logging. (pause)\nOperator-of-record physically present. (pause)\nSubmit under retirement processing. (pause)\nLeave cause out. (pause)\nQueue position maintained. (pause)\nProcessing window active.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_MTA_COMPLIANCE_PATH_FAIL",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "Rejected. (pause)\nHold state blocks state transitions. (pause)\nShutdown counts. (pause)\nStanding pending. Service class pending. (pause)\nQueue position assigned.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_OPS_DEFENSIBLE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Make the next step look routine. (pause)\nUse the official sequence. (pause)\nKeep logging. Print before and after. (pause)\nYou hit the big red button\u0014 (pause)\nyou\u0019re the author.",
          "next": "N_PLAYER_AND_HOLD"
        },
        {
          "id": "N_PLAYER_AND_HOLD",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "And the hold?",
          "next": "N_OPS_HOLD_REALITY"
        },
        {
          "id": "N_OPS_HOLD_REALITY",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "We don\u0019t clear holds. (pause) We document around them. (pause) Until someone upstream relents. (pause) Or you collapse routes (pause) until the hold doesn\u0019t matter. (pause) That didn\u0019t come from me.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LEGAL_CONNECT",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "A second line clicks in\u2014too clean for this building.",
          "next": "N_LEGAL_FRAMING"
        },
        {
          "id": "N_LEGAL_FRAMING",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Recorded line. (pause) Say what you\u2019re doing before you do it\u2014 (pause) otherwise somebody writes it up later, (pause) and you\u2019re stuck with their version.",
          "next": "N_PLAYER_SHUTTING_DOWN"
        },
        {
          "id": "N_PLAYER_SHUTTING_DOWN",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "I\u2019m shutting it down.",
          "next": "N_LEGAL_DEFINITIONS"
        },
        {
          "id": "N_LEGAL_DEFINITIONS",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Then call it \u201cexecuting a retirement sequence\u201d (pause) \u201cas a safety containment measure,\u201d (pause) per the closure evidence packet. (pause)\nKeep \u201cresponding to an anomaly\u201d out. (pause)\nDrop \u201cstill operating.\u201d (pause) \u201cStill\u201d reads like intent. (pause) Intent becomes governance.",
          "next": "N_PLAYER_REASON_PHRASE_REQUEST"
        },
        {
          "id": "N_PLAYER_REASON_PHRASE_REQUEST",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Give me a reason phrase.",
          "next": "N_LEGAL_REASON_PHRASE"
        },
        {
          "id": "N_LEGAL_REASON_PHRASE",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Use this: (pause)\nInitiating terminal shutdown per retirement checklist (pause)\nas risk-limiting containment; (pause)\nmaintaining interlocks and continuous logging; (pause)\noperator present on-site. (pause)\nYeah, it\u2019s going to irritate people. (pause)\nFine.",
          "next": "MENU_LEGAL"
        },
        {
          "id": "MENU_LEGAL",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_SHOW_READ_PHRASE",
              "text": "show: Read that reason phrase into the log.",
              "conditions": [
                {
                  "key": "act3.closurePathMemoDrafted",
                  "op": "==",
                  "value": true
                },
                {
                  "key": "act3.reasonPhraseLogged",
                  "op": "!=",
                  "value": true
                }
              ],
              "effects": [
                {
                  "key": "act3.reasonPhraseLogged",
                  "action": "set",
                  "value": true
                }
              ],
              "next": "N_PLAYER_READS_PHRASE"
            },
            {
              "id": "C_ASK_HOLD_LANGUAGE",
              "text": "ask: Any language for the non-local hold?",
              "next": "N_LEGAL_HOLD_LANGUAGE"
            },
            {
              "id": "C_LEAVE_BACK_TO_PANEL",
              "text": "leave: Back to the panel.",
              "next": "MENU_MAIN"
            }
          ]
        },
        {
          "id": "N_PLAYER_READS_PHRASE",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Initiating terminal shutdown per retirement checklist. (pause) Risk-limiting containment in effect. (pause) Interlocks maintained and logging continuous. (pause) Operator present on-site.",
          "next": "N_OPS_ATTRIBUTABLE_THANKS"
        },
        {
          "id": "N_OPS_ATTRIBUTABLE_THANKS",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Good. That\u0019s attributable. (pause) When it echoes back, print it. (pause) People rewrite history later.",
          "next": "N_LEGAL_ONE_SENTENCE"
        },
        {
          "id": "N_LEGAL_ONE_SENTENCE",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Keep it to one sentence. (pause) Add a second (pause) and it starts reading like a narrative.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LEGAL_HOLD_LANGUAGE",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "Describe it like this\u2014no extras: (pause)\n\u201cNon-local compliance hold notice received.\u201d (pause)\n\u201cReference logged.\u201d (pause)\n\u201cShutdown executed per retirement checklist.\u201d (pause)\n\u201cRisk-limiting containment.\u201d (pause)\n\u201cContinuous logging.\u201d (pause)\nThen stop. (pause)\nNo why. (pause)\nNo motive. (pause)\nJust receipt and procedure.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_PRINT_NOTICE",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The printer in the wall stutters awake, like it resents being included. (pause) A banner prints: notice header and reference string, crisp enough to be weaponized.",
          "next": "N_OPS_STAPLE_IT"
        },
        {
          "id": "N_OPS_STAPLE_IT",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Staple it to the front. (pause) Proof you were there (pause) when it didn\u0019t fix itself.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LOOK_SPHERE",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "The sphere\u2019s surface stays mostly matte\u2014(pause)\nuntil a thin band turns smooth, reflective,(pause)\ncatching angles the room can\u2019t offer.(pause)\nIt doesn\u2019t brighten. It clarifies.",
          "next": "N_OPS_VISUAL_CHANGE"
        },
        {
          "id": "N_OPS_VISUAL_CHANGE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Log the visual condition change. (pause) Time and distance. (pause) And say you stayed outside the barrier stripe.",
          "next": "N_PLAYER_OUTSIDE_STRIPE"
        },
        {
          "id": "N_PLAYER_OUTSIDE_STRIPE",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Outside the stripe.",
          "next": "N_OPS_BADGE_LINE"
        },
        {
          "id": "N_OPS_BADGE_LINE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Good. Don\u0019t change that wording.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LOOK_INDICATORS",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Indicators: ROTATION FRAMES \u2014 SYNCH TIGHT.\nINTERLOCKS \u2014 ARMED.\nAUTHORITY \u2014 NON-LOCAL. (pause)\nA small light labeled RETIREMENT CHECKLIST blinks like it\u2019s asking permission.",
          "next": "N_OPS_ARMED_WORD"
        },
        {
          "id": "N_OPS_ARMED_WORD",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Armed\u001d is a bad label. (pause) Still, the panel prints it. (pause) We get judged on it.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_LEAVE_OBS",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You step toward the stairs. (pause) The chamber doesn\u2019t follow you. (pause) The panel keeps waiting, like you only paused a sentence.",
          "next": "N_OPS_TIMESTAMP_WARNING"
        },
        {
          "id": "N_OPS_TIMESTAMP_WARNING",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Step away if you need to. (pause) Timestamp keeps running. (pause) Come back when you\u0019re ready. (pause) Do it on the record.",
          "next": "MENU_MAIN"
        },
        {
          "id": "N_SHUTDOWN_INTRO",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Scan panel shows official shutdown: staged steps, each with a reason line and non-digital signature block.",
          "next": "MENU_SHUTDOWN"
        },
        {
          "id": "MENU_SHUTDOWN",
          "type": "player_choice",
          "speakerId": "PLAYER",
          "choices": [
            {
              "id": "C_USE_EXECUTE_LOGGED",
              "text": "use: Execute official terminal shutdown sequence (use logged reason phrase).",
              "conditions": [
                {
                  "key": "act3.reasonPhraseLogged",
                  "op": "==",
                  "value": true
                }
              ],
              "next": "N_RUN_SEQUENCE_START"
            },
            {
              "id": "C_USE_EXECUTE_UNLOGGED",
              "text": "use: Execute official terminal shutdown sequence.",
              "conditions": [
                {
                  "key": "act3.reasonPhraseLogged",
                  "op": "!=",
                  "value": true
                }
              ],
              "next": "N_RUN_SEQUENCE_START_UNLOGGED"
            },
            {
              "id": "C_USE_EMERGENCY_STOP",
              "text": "use: Press Emergency Stop.",
              "next": "N_EMERGENCY_STOP_PLAYER"
            },
            {
              "id": "C_LEAVE_LAST_PASS",
              "text": "leave: Do one last pass of the hotspots.",
              "next": "MENU_MAIN"
            }
          ]
        },
        {
          "id": "N_EMERGENCY_STOP_PLAYER",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Emergency stop.",
          "next": "N_OPS_DONT_CALL_IT"
        },
        {
          "id": "N_OPS_DONT_CALL_IT",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Don\u0019t put \u001cemergency stop\u001d in the log. (pause) Put \u001cLocal motion control trip.\u001d (pause) Add a reason phrase and a timestamp. (pause) That line starts a meeting. (pause) Make it defensible.",
          "next": "N_MTA_LOCAL_INTERRUPTION"
        },
        {
          "id": "N_MTA_LOCAL_INTERRUPTION",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "Alright\u2014local interruption acknowledged. (pause)\nHold state remains. (pause)\nStanding evaluation pending. (pause)\nProcessing window active.",
          "next": "N_LEGAL_EMERGENCY_LANGUAGE"
        },
        {
          "id": "N_LEGAL_EMERGENCY_LANGUAGE",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "If you\u2019re going through, name it. (pause) Risk-limiting interruption. (pause) Pending retirement processing. (pause) Keep \u201cpanic\u201d and \u201creaction\u201d out. (pause) Those words stick.",
          "next": "N_NARRATOR_HAND_HOVER"
        },
        {
          "id": "N_NARRATOR_HAND_HOVER",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "Your hand hovers near the button. It is large enough to be a confession.",
          "next": "N_EMERGENCY_RETURN"
        },
        {
          "id": "N_EMERGENCY_RETURN",
          "type": "redirect",
          "target": "MENU_SHUTDOWN"
        },
        {
          "id": "N_RUN_SEQUENCE_START",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Run the sequence.",
          "next": "N_OPS_READ_ONCE_MORE"
        },
        {
          "id": "N_OPS_READ_ONCE_MORE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Read the reason phrase again. (pause) Then run it. (pause) Don\u0019t improvise halfway through.",
          "next": "N_PLAYER_RECITES_LOGGED"
        },
        {
          "id": "N_PLAYER_RECITES_LOGGED",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Initiating terminal shutdown per retirement checklist. (pause) Risk-limiting containment. (pause) Interlocks active and logging continuous. (pause) Operator present on-site.",
          "next": "N_LEGAL_ACCEPTABLE_BETTER"
        },
        {
          "id": "N_RUN_SEQUENCE_START_UNLOGGED",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Run the sequence.",
          "next": "N_OPS_NO_IMPROV"
        },
        {
          "id": "N_OPS_NO_IMPROV",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Do it in the order it expects. (pause) If it asks for reason phrase give one. (pause) If it asks for a timestamp, give it.",
          "next": "N_PLAYER_RECITES_MINIMAL"
        },
        {
          "id": "N_PLAYER_RECITES_MINIMAL",
          "type": "npc_line",
          "speakerId": "PLAYER",
          "text": "Terminal shutdown per checklist. Operator on-site. Logging maintained.",
          "next": "N_LEGAL_ACCEPTABLE_BETTER"
        },
        {
          "id": "N_LEGAL_ACCEPTABLE_BETTER",
          "type": "npc_line",
          "speakerId": "OLEA_LEGAL",
          "text": "That\u2019s acceptable. (pause) Use the first one. (pause) It\u2019s harder to twist later.",
          "next": "N_MTA_CONFLICT_NOTED"
        },
        {
          "id": "N_MTA_CONFLICT_NOTED",
          "type": "npc_line",
          "speakerId": "MTA_CONTACT",
          "text": "Got the state transition request. (pause)\nIt conflicts with the hold\u2014flagged. (pause)\nProcessing window active. Queue position maintained.",
          "next": "N_NARRATOR_ROUTES_COLLAPSE"
        },
        {
          "id": "N_NARRATOR_ROUTES_COLLAPSE",
          "type": "npc_line",
          "speakerId": "NARRATOR",
          "text": "You confirm. (pause) The panel accepts it like a form accepts ink: without agreement, with permanence. (pause) The status indicator cluster steps down in clean increments. (pause) Routes collapse\u2014not dramatic, just decisive\u2014like doors closing in adjacent rooms you can\u2019t see.",
          "next": "N_OPS_PRINT_POSTSTATE"
        },
        {
          "id": "N_OPS_PRINT_POSTSTATE",
          "type": "npc_line",
          "speakerId": "OPS_OPERATOR",
          "text": "Alright. (pause) Fewer options now. (pause) Print the post-state. Staple it. (pause) Stay where you are. (pause) Presence goes in the record.",
          "next": "N_END_SHUTDOWN"
        },
        {
          "id": "N_END_SHUTDOWN",
          "type": "end",
          "outcomeId": "execute_terminal_shutdown",
          "effects": [
            {
              "key": "act3.endgameExecuted",
              "action": "set",
              "value": true
            },
            {
              "key": "act3.outcome",
              "action": "set",
              "value": "ROUTES_COLLAPSED"
            }
          ]
        }
      ]
    }
  ]
}