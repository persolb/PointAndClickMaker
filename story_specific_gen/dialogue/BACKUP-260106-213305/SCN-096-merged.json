{
  "changes": [
    {
      "action": "add",
      "createScene": {
        "dialogueGraphs": [
          {
            "id": "DG_SCAN_PANEL_WITNESS_ZONE",
            "nodes": [
              {
                "id": "N_ENTER",
                "next": "PC_PANEL",
                "speakerId": "NARRATOR",
                "text": "The scan panel is mounted at waist height, clean enough to imply routine use.\nA camera. A palm reader. A small microphone grille.\nAbove it: WITNESS REQUIREMENT ZONE \u2014 TWO-PERSON PRESENCE BEYOND THIS LINE.\nThe line is the witness-marker tape. It encloses the panel and a narrow path toward the sphere, like a funnel.",
                "type": "npc_line"
              },
              {
                "choices": [
                  {
                    "checks": [
                      {
                        "key": "party.secondPresenceDetected",
                        "type": "flag",
                        "value": true
                      }
                    ],
                    "id": "C_USE_PANEL",
                    "onFailNext": "N_PANEL_USE_FAIL",
                    "onPassNext": "N_PANEL_USE_PASS",
                    "text": "use: Interface scan panel"
                  },
                  {
                    "conditions": [
                      {
                        "key": "knowledge.witnessZoneKnown",
                        "op": "!=",
                        "value": true
                      }
                    ],
                    "effects": [
                      {
                        "action": "set",
                        "key": "knowledge.witnessZoneKnown",
                        "value": true
                      }
                    ],
                    "id": "C_ASK_CONFIRM_BOUNDARY",
                    "next": "N_PANEL_ACK",
                    "text": "ask: Confirm the witness zone boundary (point-of-no-return)."
                  },
                  {
                    "id": "C_LEAVE",
                    "next": "END",
                    "text": "leave: back"
                  }
                ],
                "id": "PC_PANEL",
                "speakerId": "PLAYER",
                "type": "player_choice"
              },
              {
                "id": "N_PANEL_USE_FAIL",
                "next": "PC_PANEL_AFTER_FAIL",
                "speakerId": "NARRATOR",
                "text": "The panel wakes with a soft tone that tries to sound neutral.\nPRESENCE CHECK: INSUFFICIENT.\nThen, defensively: THIS IS NOT A DENIAL. THIS IS A REQUIREMENT.\nSECOND PRESENCE NOT DETECTED. DO NOT PROCEED ALONE.\nA final line appears, almost petty: COMPLIANCE LIKES CONSISTENCY.",
                "type": "npc_line"
              },
              {
                "choices": [
                  {
                    "conditions": [
                      {
                        "key": "knowledge.witnessZoneKnown",
                        "op": "!=",
                        "value": true
                      }
                    ],
                    "effects": [
                      {
                        "action": "set",
                        "key": "knowledge.witnessZoneKnown",
                        "value": true
                      }
                    ],
                    "id": "C_ASK_CONFIRM_BOUNDARY",
                    "next": "N_PANEL_ACK",
                    "text": "ask: Confirm the witness zone boundary (point-of-no-return)."
                  },
                  {
                    "id": "C_LEAVE",
                    "next": "END",
                    "text": "leave: back"
                  }
                ],
                "id": "PC_PANEL_AFTER_FAIL",
                "speakerId": "PLAYER",
                "type": "player_choice"
              },
              {
                "id": "N_PANEL_USE_PASS",
                "next": "PC_PANEL_AFTER_PASS",
                "speakerId": "NARRATOR",
                "text": "The panel tone shifts\u2014less defensive, more official.\nPRESENCE CHECK: SATISFIED.\nA prompt waits for you to make it a record.\nThe tape line doesn\u2019t move. The wording does: it stops being equipment and starts being testimony.",
                "type": "npc_line"
              },
              {
                "choices": [
                  {
                    "conditions": [
                      {
                        "key": "knowledge.witnessZoneKnown",
                        "op": "!=",
                        "value": true
                      }
                    ],
                    "effects": [
                      {
                        "action": "set",
                        "key": "knowledge.witnessZoneKnown",
                        "value": true
                      }
                    ],
                    "id": "C_ASK_CONFIRM_BOUNDARY",
                    "next": "N_PANEL_ACK",
                    "text": "ask: Confirm the witness zone boundary (point-of-no-return)."
                  },
                  {
                    "id": "C_LEAVE",
                    "next": "END",
                    "text": "leave: back"
                  }
                ],
                "id": "PC_PANEL_AFTER_PASS",
                "speakerId": "PLAYER",
                "type": "player_choice"
              },
              {
                "id": "N_PANEL_ACK",
                "next": "END",
                "speakerId": "NARRATOR",
                "text": "You mark it mentally the way you\u2019d mark a live bus bar: not dramatic, just absolute.\nWhatever \u201cshutdown\u201d means here, it starts when you step over the witness line and let the panel record you doing it.\nYou now know where the facility stops being equipment and starts being testimony.",
                "type": "npc_line"
              },
              {
                "id": "END",
                "outcomeId": "witness_zone_identified",
                "type": "end"
              }
            ],
            "sceneId": "SCN-096",
            "startNodeId": "N_ENTER"
          }
        ]
      },
      "op": "create_scene"
    }
  ],
  "sceneId": "SCN-096"
}